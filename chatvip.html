<script language=javascript>document.write(unescape('%3C%21DOCTYPE%20html%3E%0A%3Chtml%20lang%3D%22id%22%3E%0A%3Chead%3E%0A%20%20%3Cmeta%20charset%3D%22UTF-8%22%20/%3E%0A%20%20%3Cmeta%20name%3D%22viewport%22%20content%3D%22width%3Ddevice-width%2C%20initial-scale%3D1.0%22/%3E%0A%20%20%3Ctitle%3ESanz%3C/title%3E%0A%0A%20%20%3Clink%20rel%3D%22stylesheet%22%20href%3D%22https%3A//cdn.jsdelivr.net/npm/bootstrap-icons@1.11.3/font/bootstrap-icons.css%22/%3E%0A%20%20%3Cscript%20src%3D%22https%3A//cdn.socket.io/4.7.5/socket.io.min.js%22%3E%3C/script%3E%0A%0A%3Cstyle%3E%20%3Aroot%20%7B%20--bg%3A%20%230d1117%3B%20--surface%3A%20%23161b22%3B%20--surface-2%3A%20%231f2937%3B%20--accent%3A%20%2310b981%3B%20--accent-dark%3A%23059669%3B%20--danger%3A%20%23ef4444%3B%20--warning%3A%20%23f59e0b%3B%20--success%3A%20%2310b981%3B%20--text%3A%20%23e2e8f0%3B%20--text-sec%3A%20%2394a3b8%3B%20--border%3A%20%2330363d%3B%20--me%3A%20%23065f46%3B%20--other%3A%20%231e293b%3B%20%7D%20*%20%7B%20margin%3A%200%3B%20padding%3A%200%3B%20box-sizing%3A%20border-box%3B%20%7D%20html%2C%20body%20%7B%20height%3A%20100%25%3B%20font-family%3A%20system-ui%2C%20-apple-system%2C%20BlinkMacSystemFont%2C%20%27Segoe%20UI%27%2C%20Roboto%2C%20Oxygen%2C%20Ubuntu%2C%20Cantarell%2C%20sans-serif%3B%20background%3A%20var%28--bg%29%3B%20color%3A%20var%28--text%29%3B%20overflow%3A%20hidden%3B%20%7D%20.screen%20%7B%20height%3A%20100dvh%3B%20display%3A%20grid%3B%20place-items%3A%20center%3B%20padding%3A%2016px%3B%20%7D%20.card%20%7B%20width%3A%20100%25%3B%20max-width%3A%20420px%3B%20background%3A%20var%28--surface%29%3B%20border-radius%3A%2020px%3B%20border%3A%201px%20solid%20var%28--border%29%3B%20padding%3A%2028px%2024px%3B%20box-shadow%3A%200%2010px%2030px%20rgba%280%2C0%2C0%2C0.4%29%3B%20%7D%20.logo-big%20%7B%20font-size%3A%203.8rem%3B%20margin-bottom%3A%200.5rem%3B%20text-align%3A%20center%3B%20%7D%20h1%2C%20h2%2C%20h3%20%7B%20text-align%3A%20center%3B%20%7D%20h1%20%7B%20font-size%3A%201.75rem%3B%20font-weight%3A%20700%3B%20margin-bottom%3A%200.5rem%3B%20%7D%20h2%20%7B%20margin-bottom%3A%201.5rem%3B%20%7D%20.subtitle%20%7B%20color%3A%20var%28--text-sec%29%3B%20text-align%3A%20center%3B%20font-size%3A%200.95rem%3B%20margin-bottom%3A%201.8rem%3B%20%7D%20input%2C%20select%2C%20button%20%7B%20width%3A%20100%25%3B%20padding%3A%2014px%2016px%3B%20margin-bottom%3A%2012px%3B%20border-radius%3A%2012px%3B%20border%3A%201px%20solid%20var%28--border%29%3B%20background%3A%20var%28--surface-2%29%3B%20color%3A%20white%3B%20font-size%3A%201rem%3B%20%7D%20input%3A%3Aplaceholder%2C%20select%20option%3Adisabled%20%7B%20color%3A%20%2364748b%3B%20%7D%20button%20%7B%20background%3A%20var%28--accent%29%3B%20color%3A%20white%3B%20font-weight%3A%20600%3B%20border%3A%20none%3B%20cursor%3A%20pointer%3B%20transition%3A%20all%200.2s%3B%20%7D%20button%3Ahover%20%7B%20background%3A%20var%28--accent-dark%29%3B%20transform%3A%20translateY%28-1px%29%3B%20%7D%20button%3Aactive%20%7B%20transform%3A%20translateY%280%29%3B%20%7D%20.btn-danger%20%7B%20background%3A%20var%28--danger%29%3B%20%7D%20.btn-danger%3Ahover%20%7B%20background%3A%20%23dc2626%3B%20%7D%20.view-once-wrapper%2C%20.normal-image-wrapper%20%7B%20cursor%3A%20pointer%3B%20%7D%20.normal-image-wrapper%20img%20%7B%20transition%3A%20transform%200.2s%3B%20%7D%20.normal-image-wrapper%3Ahover%20img%20%7B%20transform%3A%20scale%281.03%29%3B%20%7D%20.view-once-wrapper%20%7B%20position%3A%20relative%3B%20cursor%3A%20pointer%3B%20user-select%3A%20none%3B%20border-radius%3A%2012px%3B%20overflow%3A%20hidden%3B%20background%3A%20%230f172a%3B%20aspect-ratio%3A%203/4%3B%20max-width%3A%20260px%3B%20margin%3A%204px%200%3B%20%7D%20.view-once-blur%20%7B%20position%3A%20absolute%3B%20inset%3A%200%3B%20background%3A%20rgba%2815%2C23%2C42%2C0.92%29%3B%20backdrop-filter%3A%20blur%2810px%29%3B%20display%3A%20flex%3B%20flex-direction%3A%20column%3B%20align-items%3A%20center%3B%20justify-content%3A%20center%3B%20color%3A%20white%3B%20font-size%3A%201.4rem%3B%20gap%3A%208px%3B%20z-index%3A%202%3B%20transition%3A%20opacity%200.3s%3B%20%7D%20.view-once-blur.hidden%20%7B%20opacity%3A%200%3B%20pointer-events%3A%20none%3B%20%7D%20.view-once-icon%20%7B%20font-size%3A%202.8rem%3B%20color%3A%20var%28--text-sec%29%3B%20%7D%20.view-once-text%20%7B%20font-size%3A%200.9rem%3B%20opacity%3A%200.9%3B%20text-align%3A%20center%3B%20max-width%3A%2080%25%3B%20%7D%20%23viewOnceModal%20%7B%20position%3A%20fixed%3B%20inset%3A%200%3B%20background%3A%20rgba%280%2C0%2C0%2C0.92%29%3B%20z-index%3A%20400%3B%20display%3A%20none%3B%20flex-direction%3A%20column%3B%20align-items%3A%20center%3B%20justify-content%3A%20center%3B%20padding%3A%2016px%3B%20%7D%20.vo-header%20%7B%20width%3A%20100%25%3B%20max-width%3A%20420px%3B%20color%3A%20white%3B%20font-size%3A%201.1rem%3B%20font-weight%3A%20600%3B%20padding%3A%2012px%2016px%3B%20background%3A%20rgba%2830%2C41%2C59%2C0.6%29%3B%20border-radius%3A%2012px%2012px%200%200%3B%20text-align%3A%20center%3B%20backdrop-filter%3A%20blur%288px%29%3B%20%7D%20.vo-content%20%7B%20position%3A%20relative%3B%20max-width%3A%2090vw%3B%20max-height%3A%2070vh%3B%20border-radius%3A%200%200%2012px%2012px%3B%20overflow%3A%20hidden%3B%20background%3A%20%23000%3B%20%7D%20.vo-img%20%7B%20max-width%3A%20100%25%3B%20max-height%3A%2070vh%3B%20object-fit%3A%20contain%3B%20display%3A%20block%3B%20%7D%20.vo-close-btn%20%7B%20position%3A%20absolute%3B%20bottom%3A%2020px%3B%20max-width%3A%2090vw%3B%20left%3A%2050%25%3B%20transform%3A%20translateX%28-50%25%29%3B%20background%3A%20%23161b22%3B%20color%3A%20white%3B%20border%3A%20none%3B%20padding%3A%2012px%2028px%3B%20font-size%3A%201rem%3B%20font-weight%3A%20500%3B%20cursor%3A%20pointer%3B%20backdrop-filter%3A%20blur%286px%29%3B%20box-shadow%3A%200%204px%2015px%20rgba%280%2C0%2C0%2C0.5%29%3B%20%7D%20.vo-close-btn%3Ahover%20%7B%20background%3A%20%23161b22%3B%20%7D%20.screen%20%7B%20height%3A%20100dvh%3B%20display%3A%20flex%3B%20justify-content%3A%20center%3B%20align-items%3A%20center%3B%20padding%3A%2016px%3B%20%7D%20.searching-container%20%7B%20display%3A%20flex%3B%20flex-direction%3A%20column%3B%20align-items%3A%20center%3B%20justify-content%3A%20center%3B%20gap%3A%201.8rem%3B%20text-align%3A%20center%3B%20max-width%3A%20320px%3B%20width%3A%20100%25%3B%20%7D%20.searching-text%20%7B%20font-size%3A%201.25rem%3B%20font-weight%3A%20500%3B%20opacity%3A%200.95%3B%20color%3A%20var%28--text%29%3B%20%7D%20.searching-subtext%20%7B%20font-size%3A%200.95rem%3B%20color%3A%20var%28--text-sec%29%3B%20line-height%3A%201.4%3B%20margin-top%3A%200.5rem%3B%20%7D%20%23searching%20%7B%20opacity%3A%200%3B%20transition%3A%20opacity%200.4s%20ease%3B%20%7D%20%23searching%5Bstyle*%3D%22display%3A%20flex%22%5D%2C%20%23searching%5Bstyle*%3D%22display%3Ablock%22%5D%20%7B%20opacity%3A%201%3B%20%7D%20.loader%20%7B%20width%3A%2048px%3B%20height%3A%2048px%3B%20border%3A%205px%20solid%20%232d3748%3B%20border-top%3A%205px%20solid%20var%28--accent%29%3B%20border-radius%3A%2050%25%3B%20animation%3A%20spin%201s%20linear%20infinite%3B%20%7D%20@keyframes%20spin%20%7B%20to%20%7B%20transform%3A%20rotate%28360deg%29%3B%20%7D%20%7D%20%23chat%20%7B%20display%3A%20none%3B%20flex-direction%3A%20column%3B%20height%3A%20100dvh%3B%20%7D%20.header%20%7B%20height%3A%2064px%3B%20background%3A%20var%28--surface%29%3B%20border-bottom%3A%201px%20solid%20var%28--border%29%3B%20display%3A%20flex%3B%20align-items%3A%20center%3B%20justify-content%3A%20space-between%3B%20padding%3A%200%2016px%3B%20font-weight%3A%20500%3B%20%7D%20.partner-info%20%7B%20line-height%3A%201.3%3B%20%7D%20.partner-name%20%7B%20font-size%3A%201.1rem%3B%20font-weight%3A%20600%3B%20%7D%20.partner-status%20%7B%20font-size%3A%200.82rem%3B%20opacity%3A%200.8%3B%20%7D%20.status-online%20%7B%20color%3A%20%2334d399%3B%20%7D%20.status-offline%20%7B%20color%3A%20%23f87171%3B%20%7D%20.status-typing%20%7B%20color%3A%20%23fbbf24%3B%20font-style%3A%20italic%3B%20%7D%20.encryption-info%20%7B%20display%3A%20flex%3B%20align-items%3A%20center%3B%20justify-content%3A%20center%3B%20background%3A%20var%28--surface-2%29%3B%20padding%3A%206px%2012px%3B%20border-bottom%3A%201px%20solid%20var%28--border%29%3B%20font-size%3A%200.85rem%3B%20color%3A%20var%28--text-sec%29%3B%20gap%3A%206px%3B%20%7D%20.encryption-info%20i%20%7B%20font-size%3A%201rem%3B%20color%3A%20var%28--success%29%3B%20%7D%20%23messages%20%7B%20flex%3A%201%3B%20padding%3A%2016px%3B%20overflow-y%3A%20auto%3B%20display%3A%20flex%3B%20flex-direction%3A%20column%3B%20gap%3A%2010px%3B%20%7D%20.msg%20%7B%20max-width%3A%2078%25%3B%20display%3A%20flex%3B%20flex-direction%3A%20column%3B%20position%3A%20relative%3B%20user-select%3A%20none%3B%20%7D%20.me%20%7B%20align-self%3A%20flex-end%3B%20%7D%20.other%20%7B%20align-self%3A%20flex-start%3B%20%7D%20.bubble%20%7B%20padding%3A%2010px%2014px%3B%20border-radius%3A%2018px%3B%20font-size%3A%200.96rem%3B%20line-height%3A%201.4%3B%20word-break%3A%20break-word%3B%20%7D%20.me%20.bubble%20%7B%20background%3A%20var%28--me%29%3B%20border-bottom-right-radius%3A%204px%3B%20%7D%20.other%20.bubble%20%7B%20background%3A%20var%28--other%29%3B%20border-bottom-left-radius%3A%204px%3B%20%7D%20.time%20%7B%20font-size%3A%200.68rem%3B%20opacity%3A%200.6%3B%20margin-top%3A%203px%3B%20align-self%3A%20flex-end%3B%20%7D%20.file-preview%20%7B%20max-width%3A%20100%25%3B%20max-height%3A%20200px%3B%20border-radius%3A%208px%3B%20%7D%20.view-once%20%7B%20opacity%3A%200.7%3B%20font-style%3A%20italic%3B%20%7D%20.deleted-msg%20%7B%20font-style%3A%20italic%3B%20color%3A%20var%28--text-sec%29%3B%20%7D%20.footer%20%7B%20padding%3A%2012px%2016px%3B%20background%3A%20var%28--surface%29%3B%20border-top%3A%201px%20solid%20var%28--border%29%3B%20display%3A%20flex%3B%20gap%3A%2010px%3B%20%7D%20.footer%20input%20%7B%20flex%3A%201%3B%20border-radius%3A%20999px%3B%20padding%3A%2012px%2020px%3B%20border%3A%20none%3B%20%7D%20.footer%20button%20%7B%20background%3A%2310b981%3Bwidth%3A%2048px%3B%20height%3A%2048px%3B%20border-radius%3A%2050%25%3B%20font-size%3A%201.4rem%3B%20display%3A%20grid%3B%20place-items%3A%20center%3B%20padding%3A%200%3B%20%7D%20.video-wrap%20%7B%20position%3A%20fixed%3B%20inset%3A%200%3B%20background%3A%20black%3B%20display%3A%20none%3B%20flex-direction%3A%20column%3B%20z-index%3A%20100%3B%20%7D%20.video-header%20%7B%20height%3A%2056px%3B%20background%3A%20rgba%280%2C0%2C0%2C0.6%29%3B%20color%3A%20white%3B%20display%3A%20flex%3B%20align-items%3A%20center%3B%20justify-content%3A%20space-between%3B%20padding%3A%200%2016px%3B%20font-size%3A%201.05rem%3B%20backdrop-filter%3A%20blur%2810px%29%3B%20%7D%20.video-body%20%7B%20flex%3A%201%3B%20position%3A%20relative%3B%20background%3A%20%23000%3B%20%7D%20video%20%7B%20transform%3A%20scaleX%28-1%29%20%21important%3B%20%7D%20video%20%7B%20width%3A%20100%25%3B%20height%3A%20100%25%3B%20object-fit%3A%20cover%3B%20transition%3A%20all%200.4s%20ease%3B%20%7D%20video%23localVideo%2C%20video%23remoteVideo%2C%20%23localVideo.pip%2C%20%23localVideo.full%2C%20%23remoteVideo.pip%2C%20%23remoteVideo.full%20%7B%20transform%3A%20scaleX%28-1%29%20%21important%3B%20%7D%20%23localVideo.pip%2C%20%23remoteVideo.pip%20%7B%20position%3A%20absolute%3B%20bottom%3A%2020px%3B%20right%3A%2020px%3B%20width%3A%20120px%20%21important%3B%20height%3A%20160px%20%21important%3B%20border-radius%3A%2016px%3B%20border%3A%203px%20solid%20rgba%28255%2C255%2C255%2C0.25%29%3B%20box-shadow%3A%200%208px%2025px%20rgba%280%2C0%2C0%2C0.6%29%3B%20background%3A%20black%3B%20object-fit%3A%20cover%3B%20cursor%3A%20pointer%3B%20z-index%3A%2010%3B%20%7D%20%23localVideo.full%2C%20%23remoteVideo.full%20%7B%20position%3A%20static%3B%20width%3A%20100%25%20%21important%3B%20height%3A%20100%25%20%21important%3B%20border-radius%3A%200%20%21important%3B%20border%3A%20none%20%21important%3B%20box-shadow%3A%20none%20%21important%3B%20z-index%3A%205%3B%20%7D%20%23localVideo%20%7B%20transform%3A%20scaleX%28-1%29%3B%20%7D%20video.pip-normal%20%7B%20width%3A%20120px%20%21important%3B%20height%3A%20160px%20%21important%3B%20bottom%3A%2020px%20%21important%3B%20right%3A%2020px%20%21important%3B%20border-radius%3A%2016px%3B%20border%3A%203px%20solid%20rgba%28255%2C255%2C255%2C0.25%29%3B%20box-shadow%3A%200%208px%2025px%20rgba%280%2C0%2C0%2C0.6%29%3B%20%7D%20video.pip-mini%20%7B%20width%3A%2096px%20%21important%3B%20height%3A%20128px%20%21important%3B%20bottom%3A%20100px%20%21important%3B%20right%3A%2016px%20%21important%3B%20border%3A%202px%20solid%20%2310b981%3B%20border-radius%3A%2014px%3B%20box-shadow%3A%200%204px%2020px%20rgba%280%2C0%2C0%2C0.6%29%3B%20%7D%20%23localVideo.pip%2C%20%23remoteVideo.pip%20%7B%20position%3A%20absolute%3B%20background%3A%20black%3B%20object-fit%3A%20cover%3B%20cursor%3A%20pointer%3B%20z-index%3A%2010%3B%20%7D%20%23videoCallBtn.disabled%20%7B%20opacity%3A%200.4%3B%20cursor%3A%20not-allowed%3B%20pointer-events%3A%20none%3B%20%7D%20%23videoCallBtn%20%7B%20transition%3A%20opacity%200.2s%3B%20%7D%20.media-status-overlay%20%7B%20position%3A%20absolute%3B%20top%3A%2012px%3B%20left%3A%2012px%3B%20background%3A%20rgba%280%2C0%2C0%2C0.65%29%3B%20color%3A%20%23fbbf24%3B%20width%3A%2044px%3B%20height%3A%2044px%3B%20border-radius%3A%2050%25%3B%20display%3A%20flex%3B%20align-items%3A%20center%3B%20justify-content%3A%20center%3B%20font-size%3A%201.5rem%3B%20z-index%3A%2015%3B%20backdrop-filter%3A%20blur%284px%29%3B%20border%3A%202px%20solid%20rgba%28251%2C191%2C36%2C0.5%29%3B%20transition%3A%20opacity%200.4s%20ease%2C%20transform%200.3s%20ease%3B%20%7D%20.media-status-overlay.hidden%20%7B%20opacity%3A%200%3B%20transform%3A%20scale%280.85%29%3B%20pointer-events%3A%20none%3B%20%7D%20%23remoteVideo.pip%20%7E%20%23micStatusRemote%2C%20%23localVideo.pip%20%7E%20%23micStatusLocal%20%7B%20width%3A%2032px%3B%20height%3A%2032px%3B%20font-size%3A%201.1rem%3B%20top%3A%206px%3B%20left%3A%206px%3B%20border-width%3A%201.5px%3B%20%7D%20.video-footer%20%7B%20height%3A%2080px%3B%20background%3A%20rgba%280%2C0%2C0%2C0.6%29%3B%20backdrop-filter%3A%20blur%2810px%29%3B%20display%3A%20flex%3B%20justify-content%3A%20center%3B%20align-items%3A%20center%3B%20gap%3A%2024px%3B%20%7D%20.video-footer%20i%20%7B%20font-size%3A%201.6rem%3B%20width%3A%2056px%3B%20height%3A%2056px%3B%20border-radius%3A%2050%25%3B%20background%3A%20rgba%28255%2C255%2C255%2C0.08%29%3B%20display%3A%20grid%3B%20place-items%3A%20center%3B%20cursor%3A%20pointer%3B%20transition%3A%20all%200.2s%3B%20%7D%20.video-footer%20i%3Ahover%20%7B%20background%3A%20rgba%28255%2C255%2C255%2C0.15%29%3B%20%7D%20.video-footer%20i.muted%20%7B%20color%3A%20%23fca5a5%3B%20background%3A%20rgba%28239%2C68%2C68%2C0.18%29%3B%20%7D%20.video-footer%20.end-call%20%7B%20background%3A%20var%28--danger%29%3B%20%7D%20.modal%20%7B%20position%3A%20fixed%3B%20inset%3A%200%3B%20background%3A%20rgba%280%2C0%2C0%2C0.75%29%3B%20display%3A%20none%3B%20place-items%3A%20center%3B%20z-index%3A%20200%3B%20backdrop-filter%3A%20blur%284px%29%3B%20%7D%20.modal-box%20%7B%20background%3A%20var%28--surface%29%3B%20border%3A%201px%20solid%20var%28--border%29%3B%20border-radius%3A%2020px%3B%20padding%3A%2028px%3B%20width%3A%2090%25%3B%20max-width%3A%20360px%3B%20text-align%3A%20center%3B%20box-shadow%3A%200%2020px%2040px%20rgba%280%2C0%2C0%2C0.5%29%3B%20%7D%20.modal-box%20button%20%7B%20margin%3A%208px%200%3B%20%7D%20%23actionToast%20%7B%20position%3A%20fixed%3B%20bottom%3A%2090px%3B%20left%3A%2050%25%3B%20transform%3A%20translateX%28-50%25%29%3B%20background%3A%20rgba%2830%2C41%2C59%2C0.92%29%3B%20color%3A%20white%3B%20padding%3A%2012px%2024px%3B%20border-radius%3A%20999px%3B%20font-size%3A%200.95rem%3B%20z-index%3A%20300%3B%20opacity%3A%200%3B%20pointer-events%3A%20none%3B%20transition%3A%20opacity%200.4s%2C%20transform%200.4s%3B%20backdrop-filter%3A%20blur%2810px%29%3B%20%7D%20.net-pill%20%7B%20background%3A%20rgba%2830%2C41%2C59%2C0.85%29%3B%20padding%3A%205px%2012px%3B%20border-radius%3A%20999px%3B%20font-size%3A%200.85rem%3B%20font-weight%3A%20600%3B%20display%3A%20none%3B%20align-items%3A%20center%3B%20backdrop-filter%3A%20blur%2810px%29%3B%20color%3A%20%2334d399%3B%20border%3A%201px%20solid%20%230f9d6e%3B%20%7D%20.video-header%20.net-pill%20%7B%20margin-left%3A%20auto%3B%20align-self%3A%20center%3B%20%7D%20%23filePreviewModal%20.preview-img%20%7B%20max-width%3A%20100%25%3B%20max-height%3A%20200px%3B%20margin-bottom%3A%2012px%3B%20border-radius%3A%208px%3B%20%7D%20%23filePreviewModal%20.caption-input%20%7B%20width%3A%20100%25%3B%20padding%3A%2010px%3B%20margin-bottom%3A%2012px%3B%20border-radius%3A%208px%3B%20border%3A%201px%20solid%20var%28--border%29%3B%20background%3A%20var%28--surface-2%29%3B%20color%3A%20var%28--text%29%3B%20%7D%20%23filePreviewModal%20.view-once-checkbox%20%7B%20display%3A%20flex%3B%20align-items%3A%20center%3B%20gap%3A%208px%3B%20margin-bottom%3A%2016px%3B%20font-size%3A%200.95rem%3B%20%7D%20.msg-action%20%7B%20position%3A%20absolute%3B%20top%3A%2050%25%3B%20transform%3A%20translateY%28-50%25%29%3B%20left%3A%20-80px%3B%20background%3A%20var%28--surface-2%29%3B%20border%3A%201px%20solid%20var%28--border%29%3B%20border-radius%3A%208px%3B%20padding%3A%207px%2012px%3B%20font-size%3A%200.9rem%3B%20color%3A%20var%28--danger%29%3B%20cursor%3A%20pointer%3B%20z-index%3A%2010%3B%20display%3A%20none%3B%20white-space%3A%20nowrap%3B%20user-select%3A%20none%3B%20box-shadow%3A%200%202px%208px%20rgba%280%2C0%2C0%2C0.3%29%3B%20opacity%3A%200%3B%20transition%3A%20opacity%200.2s%20ease%2C%20transform%200.2s%20ease%3B%20%7D%20.msg.me%3Ahover%20.msg-action%2C%20.msg.me.long-press%20.msg-action%2C%20.msg.me.clicked%20.msg-action%20%7B%20display%3A%20block%3B%20opacity%3A%201%3B%20transform%3A%20translateY%28-50%25%29%20translateX%285px%29%3B%20%7D%20@media%20%28max-width%3A%20500px%29%20%7B%20.msg-action%20%7B%20left%3A%20-70px%3B%20font-size%3A%200.82rem%3B%20padding%3A%205px%2010px%3B%20%7D%20%7D%20.card%3Anot%28.hidden%29%20%7B%20opacity%3A%201%3B%20transform%3A%20translateY%280%29%3B%20%7D%20.hidden%20%7B%20display%3A%20none%20%21important%3B%20%7D%20@media%20%28max-width%3A%20500px%29%20%7B%20.video-header%20.net-pill%20%7B%20padding%3A%204px%2010px%3B%20font-size%3A%200.78rem%3B%20%7D%20%23localVideo.pip%2C%20%23remoteVideo.pip%20%7B%20width%3A%20100px%20%21important%3B%20height%3A%20133px%20%21important%3B%20bottom%3A%2016px%3B%20right%3A%2016px%3B%20%7D%20%7D%20%3C/style%3E%0A%3C/head%3E%0A%3Cbody%3E%0A%0A%3Cdiv%20class%3D%22screen%22%20id%3D%22loginScreen%22%3E%0A%20%20%3Cdiv%20id%3D%22welcomeContent%22%3E%0A%20%20%20%20%3Cdiv%20class%3D%22logo-big%22%3E%uD83D%uDCAC%3C/div%3E%0A%20%20%20%20%3Ch1%3EAnonymous%3C/h1%3E%0A%20%20%20%20%3Cdiv%20class%3D%22subtitle%22%3ENgobrol%20santai%20dengan%20orang%20baru%3C/div%3E%0A%20%20%20%20%3Cbutton%20onclick%3D%22showLoginForm%28%29%22%3EMulai%3C/button%3E%0A%20%20%3C/div%3E%0A%0A%20%20%3Cdiv%20class%3D%22card%20hidden%22%20id%3D%22loginForm%22%3E%0A%20%20%20%20%3Ch1%3ESanz%20project%3C/h1%3E%0A%20%20%3Cdiv%20class%3D%22subtitle%22%3EMasuk%20untuk%20memulai%20percakapan%20anonim%3C/div%3E%0A%20%20%20%20%3Cinput%20id%3D%22name%22%20placeholder%3D%22Nama%20%28opsional%29%22%20autocomplete%3D%22off%22/%3E%0A%20%20%20%20%0A%20%20%20%20%3Cdiv%20style%3D%22display%3Aflex%3B%20justify-content%3Aspace-between%3B%20align-items%3Acenter%3B%20margin%3A8px%200%204px%3B%20font-weight%3A500%3B%20color%3Avar%28--text-sec%29%22%3E%0A%20%20%20%20%20%20%3Cspan%3EUmur%3C/span%3E%0A%20%20%20%20%20%20%3Cspan%20id%3D%22ageVal%22%3E21%3C/span%3E%0A%20%20%20%20%3C/div%3E%0A%20%20%20%20%3Cinput%20id%3D%22age%22%20type%3D%22range%22%20min%3D%2213%22%20max%3D%2280%22%20value%3D%2221%22%20oninput%3D%22ageVal.innerText%3Dthis.value%22/%3E%0A%0A%20%20%20%20%3Cselect%20id%3D%22gender%22%3E%0A%20%20%20%20%20%20%3Coption%20value%3D%22%22%20disabled%20selected%3EGender%3C/option%3E%0A%20%20%20%20%20%20%3Coption%3ELaki-laki%3C/option%3E%0A%20%20%20%20%20%20%3Coption%3EPerempuan%3C/option%3E%0A%20%20%20%20%3C/select%3E%0A%0A%20%20%20%20%3Cselect%20id%3D%22job%22%3E%0A%20%20%20%20%20%20%3Coption%20value%3D%22%22%20disabled%20selected%3EStatus%20saat%20ini%3C/option%3E%0A%20%20%20%20%20%20%3Coption%3ESekolah%3C/option%3E%0A%20%20%20%20%20%20%3Coption%3EKerja%3C/option%3E%0A%20%20%20%20%20%20%3Coption%3EPengangguran%3C/option%3E%0A%20%20%20%20%20%20%3Coption%3ELainnya%3C/option%3E%0A%20%20%20%20%3C/select%3E%0A%0A%20%20%20%20%3Cselect%20id%3D%22server%22%3E%0A%20%20%20%20%20%20%3Coption%20value%3D%22server1%22%3EServer%201%3C/option%3E%0A%20%20%20%20%20%20%3Coption%20value%3D%22server2%22%3EServer%202%3C/option%3E%0A%20%20%20%20%20%20%3Coption%20value%3D%22server3%22%3EServer%203%3C/option%3E%0A%20%20%20%20%3C/select%3E%0A%0A%20%20%20%20%3Cbutton%20onclick%3D%22start%28%29%22%20style%3D%22margin-top%3A%2010px%3B%22%3EMasuk%20Chat%3C/button%3E%0A%20%20%3C/div%3E%0A%3C/div%3E%0A%0A%3Cdiv%20class%3D%22screen%22%20id%3D%22searching%22%20style%3D%22display%3Anone%3B%20flex-direction%3Acolumn%3B%20gap%3A1.5rem%3B%22%3E%0A%20%20%3Cdiv%20class%3D%22loader%22%3E%3C/div%3E%0A%20%20%3Cdiv%20style%3D%22font-size%3A1.1rem%3B%20opacity%3A0.9%22%3EMencari%20partner...%3C/div%3E%0A%3C/div%3E%0A%0A%3Cdiv%20id%3D%22chat%22%3E%0A%20%20%3Cdiv%20class%3D%22header%22%3E%0A%20%20%20%20%3Cdiv%20class%3D%22partner-info%22%3E%0A%20%20%20%20%20%20%3Cdiv%20class%3D%22partner-name%22%20id%3D%22partnerName%22%3EMenghubungkan...%3C/div%3E%0A%20%20%20%20%20%20%3Cdiv%20class%3D%22partner-status%22%20id%3D%22partnerStatus%22%3EOnline%3C/div%3E%0A%20%20%20%20%3C/div%3E%0A%20%20%20%20%3Cdiv%20style%3D%22display%3Aflex%3B%20gap%3A16px%3B%20font-size%3A1.4rem%3B%22%3E%0A%20%20%20%20%20%20%3Ci%20class%3D%22bi%20bi-arrow-clockwise%22%20id%3D%22refreshBtn%22%20onclick%3D%22refreshChat%28%29%22%20style%3D%22display%3Anone%3B%20cursor%3Apointer%22%3E%3C/i%3E%0A%20%20%20%20%20%20%3Ci%20class%3D%22bi%20bi-camera-video-fill%22%20id%3D%22videoCallBtn%22%20style%3D%22cursor%3Apointer%22%3E%3C/i%3E%0A%20%20%20%20%20%20%3Ci%20class%3D%22bi%20bi-person-circle%22%20onclick%3D%22openProfile%28%29%22%20style%3D%22cursor%3Apointer%22%3E%3C/i%3E%0A%20%20%20%20%20%20%3Ci%20class%3D%22bi%20bi-box-arrow-right%22%20onclick%3D%22logout%28%29%22%20style%3D%22cursor%3Apointer%3B%20color%3A%23f87171%22%3E%3C/i%3E%0A%20%20%20%20%3C/div%3E%0A%20%20%3C/div%3E%0A%0A%20%20%3Cdiv%20class%3D%22encryption-info%22%3E%0A%20%20%20%20%3Ci%20class%3D%22bi%20bi-lock-fill%22%3E%3C/i%3E%0A%20%20%20%20End-to-end%20encrypted%0A%20%20%3C/div%3E%0A%0A%20%20%3Cdiv%20id%3D%22messages%22%3E%3C/div%3E%0A%0A%20%20%3Cdiv%20class%3D%22footer%22%3E%0A%20%20%20%20%3Cinput%20id%3D%22msg%22%20placeholder%3D%22Ketik%20pesan...%22%20autocomplete%3D%22off%22%20onkeydown%3D%22if%28event.key%3D%3D%3D%27Enter%27%29sendMessage%28%29%22/%3E%0A%20%20%20%20%3Cbutton%20onclick%3D%22document.getElementById%28%27fileInput%27%29.click%28%29%22%3E%3Ci%20class%3D%22bi%20bi-paperclip%22%3E%3C/i%3E%3C/button%3E%0A%20%20%20%20%3Cinput%20type%3D%22file%22%20id%3D%22fileInput%22%20style%3D%22display%3Anone%3B%22%20onchange%3D%22previewFile%28%29%22/%3E%0A%20%20%20%20%3Cbutton%20onclick%3D%22sendMessage%28%29%22%3E%0A%20%20%20%20%20%3Ci%20class%3D%22bi%20bi-send-fill%22%3E%3C/i%3E%0A%20%20%20%20%3C/button%3E%0A%20%20%3C/div%3E%0A%3C/div%3E%0A%0A%3Cdiv%20id%3D%22videoScreen%22%20class%3D%22video-wrap%22%3E%0A%20%20%3Cdiv%20class%3D%22video-header%22%3E%0A%20%20%20%20%3Cspan%20id%3D%22callName%22%3EVideo%20Call%3C/span%3E%0A%20%20%20%20%3Cdiv%20class%3D%22net-pill%22%20id%3D%22netStatus%22%3E%0A%20%20%20%20%20%20%3Cspan%20id%3D%22netLeft%22%3E%u2014%20ms%3C/span%3E%0A%20%20%20%20%3C/div%3E%0A%20%20%3C/div%3E%0A%0A%3Cdiv%20class%3D%22video-body%22%3E%0A%20%20%3Cdiv%20id%3D%22micStatusRemote%22%20class%3D%22media-status-overlay%20hidden%20mic%22%20title%3D%22Mikrofon%20partner%20dimatikan%22%3E%0A%20%20%20%20%3Ci%20class%3D%22bi%20bi-mic-mute-fill%22%3E%3C/i%3E%0A%20%20%3C/div%3E%0A%0A%20%20%3Cdiv%20id%3D%22micStatusLocal%22%20class%3D%22media-status-overlay%20hidden%20mic%22%20title%3D%22Mikrofon%20kamu%20dimatikan%22%3E%0A%20%20%20%20%3Ci%20class%3D%22bi%20bi-mic-mute-fill%22%3E%3C/i%3E%0A%20%20%3C/div%3E%0A%0A%20%20%3Cvideo%20id%3D%22remoteVideo%22%20autoplay%20playsinline%20class%3D%22full%22%3E%3C/video%3E%0A%20%20%3Cvideo%20id%3D%22localVideo%22%20autoplay%20muted%20playsinline%20class%3D%22pip%22%3E%3C/video%3E%0A%3C/div%3E%0A%0A%3Cdiv%20class%3D%22video-footer%22%3E%0A%20%20%3Ci%20id%3D%22micBtn%22%20%20%20class%3D%22bi%20bi-mic-fill%22%20%20%20%20%20%20%20%20onclick%3D%22toggleMic%28%29%22%3E%3C/i%3E%0A%20%20%3Ci%20id%3D%22camBtn%22%20%20%20class%3D%22bi%20bi-camera-video-fill%22%20onclick%3D%22toggleCam%28%29%22%3E%3C/i%3E%0A%20%20%3Ci%20class%3D%22bi%20bi-arrow-repeat%22%20onclick%3D%22switchCamera%28%29%22%3E%3C/i%3E%0A%20%20%0A%20%20%3Ci%20class%3D%22bi%20bi-box-arrow-down-right%22%20%0A%20%20%20%20%20id%3D%22minimizeCallBtn%22%0A%20%20%20%20%20onclick%3D%22minimizeToPartnerView%28%29%22%0A%20%20%20%20%20title%3D%22Kecilkan%20%26%20tetap%20lihat%20partner%20sambil%20chat%22%0A%20%20%20%20%20style%3D%22font-size%3A1.5rem%3B%20cursor%3Apointer%3B%22%3E%3C/i%3E%0A%20%20%0A%20%20%3Ci%20class%3D%22bi%20bi-telephone-x-fill%20end-call%22%20onclick%3D%22endCall%28%29%22%3E%3C/i%3E%0A%3C/div%3E%0A%3C/div%3E%0A%0A%3Cdiv%20id%3D%22viewOnceModal%22%3E%0A%20%20%3Cdiv%20class%3D%22vo-header%22%20id%3D%22voHeader%22%3EFoto%20dari%20...%3C/div%3E%0A%20%20%3Cdiv%20class%3D%22vo-content%22%3E%0A%20%20%20%20%3Cimg%20id%3D%22voFullImage%22%20class%3D%22vo-img%22%20alt%3D%22View%20once%20image%22%20/%3E%0A%20%20%3C/div%3E%0A%20%20%3Cbutton%20class%3D%22vo-close-btn%22%20onclick%3D%22closeViewOnce%28%29%22%3ETutup%3C/button%3E%0A%3C/div%3E%0A%0A%3Cdiv%20id%3D%22deleteConfirmModal%22%20class%3D%22modal%22%20style%3D%22display%3Anone%3B%22%3E%0A%20%20%3Cdiv%20class%3D%22modal-box%22%3E%0A%20%20%20%20%3Cp%20style%3D%22font-size%3A1.05rem%3B%22%3E%0A%20%20%20%20%20%20Hapus%20pesan%20ini%20untuk%20semua%20orang%3F%3Cbr%3E%0A%20%20%20%20%3C/p%3E%0A%20%20%20%20%3Cdiv%20style%3D%22display%3Aflex%3B%20gap%3A12px%3B%20margin-top%3A1rem%3B%22%3E%0A%20%20%20%20%20%20%3Cbutton%20onclick%3D%22confirmDelete%28%29%22%20style%3D%22flex%3A1%3B%20background%3Avar%28--danger%29%3B%22%3EHapus%3C/button%3E%0A%20%20%20%20%20%20%3Cbutton%20onclick%3D%22closeDeleteModal%28%29%22%20style%3D%22flex%3A1%3B%22%3EBatal%3C/button%3E%0A%20%20%20%20%3C/div%3E%0A%20%20%3C/div%3E%0A%3C/div%3E%0A%0A%3Cdiv%20id%3D%22miniRemoteVideoContainer%22%20style%3D%22display%3Anone%3B%20position%3Afixed%3B%20bottom%3A90px%3B%20right%3A16px%3B%20z-index%3A250%3B%20cursor%3Apointer%3B%22%3E%0A%20%20%3Cvideo%20id%3D%22miniRemoteVideo%22%20autoplay%20playsinline%20style%3D%22%0A%20%20%20%20width%3A%2096px%3B%0A%20%20%20%20height%3A%20128px%3B%0A%20%20%20%20border-radius%3A%2016px%3B%0A%20%20%20%20border%3A%202px%20solid%20%2310b981%3B%0A%20%20%20%20box-shadow%3A%200%204px%2020px%20rgba%280%2C0%2C0%2C0.6%29%3B%0A%20%20%20%20background%3A%20black%3B%0A%20%20%20%20object-fit%3A%20cover%3B%0A%20%20%22%3E%3C/video%3E%0A%20%20%3C/div%3E%0A%3C/div%3E%0A%0A%3Cdiv%20id%3D%22incomingCall%22%20class%3D%22modal%22%3E%0A%20%20%3Cdiv%20class%3D%22modal-box%22%3E%0A%20%20%20%20%3Ch3%3EPanggilan%20Video%20Masuk%3C/h3%3E%0A%20%20%20%20%3Cp%20id%3D%22callerName%22%20style%3D%22margin%3A1rem%200%3B%20font-size%3A1.1rem%22%3E%3C/p%3E%0A%20%20%20%20%3Cbutton%20onclick%3D%22acceptCall%28%29%22%3ETerima%3C/button%3E%0A%20%20%20%20%3Cbutton%20class%3D%22btn-danger%22%20onclick%3D%22rejectCall%28%29%22%3ETolak%3C/button%3E%0A%20%20%3C/div%3E%0A%3C/div%3E%0A%0A%3Cdiv%20id%3D%22rejectedModal%22%20class%3D%22modal%22%3E%0A%20%20%3Cdiv%20class%3D%22modal-box%22%3E%0A%20%20%20%20%3Cdiv%20style%3D%22font-size%3A3rem%3B%20color%3Avar%28--danger%29%3B%20margin-bottom%3A1rem%3B%22%3E%u2716%3C/div%3E%0A%20%20%20%20%3Cp%20id%3D%22rejectedText%22%20style%3D%22margin-bottom%3A1.5rem%22%3E%3C/p%3E%0A%20%20%20%20%3Cbutton%20onclick%3D%22closeRejected%28%29%22%3ETutup%3C/button%3E%0A%20%20%3C/div%3E%0A%3C/div%3E%0A%0A%3Cdiv%20id%3D%22profileModal%22%20class%3D%22modal%22%3E%0A%20%20%3Cdiv%20class%3D%22modal-box%22%20style%3D%22text-align%3Aleft%22%3E%0A%20%20%20%20%3Ch3%3EProfil%20Partner%3C/h3%3E%0A%20%20%20%20%3Cdiv%20id%3D%22profileContent%22%20style%3D%22margin%3A1.2rem%200%3B%20line-height%3A1.7%3B%20color%3Avar%28--text-sec%29%22%3E%3C/div%3E%0A%20%20%20%20%3Cbutton%20onclick%3D%22closeProfile%28%29%22%3ETutup%3C/button%3E%0A%20%20%3C/div%3E%0A%3C/div%3E%0A%0A%3Cdiv%20id%3D%22waitingModal%22%20class%3D%22modal%22%3E%0A%20%20%3Cdiv%20class%3D%22modal-box%22%3E%0A%20%20%20%20%3Cdiv%20class%3D%22loader%22%20style%3D%22margin%3A0%20auto%201.5rem%22%3E%3C/div%3E%0A%20%20%20%20%3Cp%20id%3D%22waitingText%22%3EMenunggu%20partner%20menerima...%3C/p%3E%0A%20%20%3C/div%3E%0A%3C/div%3E%0A%0A%3Cdiv%20id%3D%22alertModal%22%20class%3D%22modal%22%3E%0A%20%20%3Cdiv%20class%3D%22modal-box%22%3E%0A%20%20%20%20%3Cp%20id%3D%22alertText%22%20style%3D%22margin-bottom%3A1.5rem%3B%20font-size%3A1rem%22%3E%3C/p%3E%0A%20%20%20%20%3Cbutton%20onclick%3D%22closeAlert%28%29%22%3EOK%3C/button%3E%0A%20%20%3C/div%3E%0A%3C/div%3E%0A%0A%3Cdiv%20id%3D%22filePreviewModal%22%20class%3D%22modal%22%20style%3D%22display%3Anone%3B%22%3E%0A%20%20%3Cdiv%20class%3D%22modal-box%22%20style%3D%22max-width%3A%20400px%3B%20padding%3A%2024px%2020px%3B%22%3E%0A%20%20%20%20%3Ch3%20style%3D%22margin-bottom%3A%201.2rem%3B%22%3EPratinjau%20Gambar%3C/h3%3E%0A%20%20%20%20%0A%20%20%20%20%3Cdiv%20style%3D%22text-align%3A%20center%3B%20margin-bottom%3A%201.5rem%3B%22%3E%0A%20%20%20%20%20%20%3Cimg%20id%3D%22previewImage%22%20class%3D%22preview-img%22%20style%3D%22display%3Anone%3B%20max-height%3A%20260px%3B%20border-radius%3A%2012px%3B%20box-shadow%3A%200%204px%2015px%20rgba%280%2C0%2C0%2C0.3%29%3B%22/%3E%0A%20%20%20%20%3C/div%3E%0A%0A%20%20%20%20%3Cinput%20%0A%20%20%20%20%20%20id%3D%22captionInput%22%20%0A%20%20%20%20%20%20class%3D%22caption-input%22%20%0A%20%20%20%20%20%20placeholder%3D%22Tambahkan%20caption%20%28opsional%29%22%20%0A%20%20%20%20%20%20style%3D%22margin-bottom%3A%201.4rem%3B%22%0A%20%20%20%20/%3E%0A%0A%20%20%20%20%3Clabel%20class%3D%22view-once-checkbox%22%20style%3D%22display%3A%20flex%3B%20align-items%3A%20center%3B%20gap%3A%2010px%3B%20margin-bottom%3A%201.5rem%3B%20cursor%3A%20pointer%3B%20user-select%3A%20none%3B%22%3E%0A%20%20%20%20%20%20%3Cinput%20type%3D%22checkbox%22%20id%3D%22viewOnceCheckbox%22%20style%3D%22width%3A%2018px%3B%20height%3A%2018px%3B%20accent-color%3A%20var%28--accent%29%3B%22/%3E%0A%20%20%20%20%20%20%3Cspan%20style%3D%22margin-bottom%3A11px%3Bfont-size%3A%200.97rem%3B%20color%3A%20var%28--text%29%3B%22%3EKirim%20sebagai%20pesan%20sekali%20lihat%3C/span%3E%0A%20%20%20%20%3C/label%3E%0A%0A%20%20%20%20%3Cdiv%20style%3D%22display%3A%20flex%3B%20gap%3A%2012px%3B%20margin-top%3A%200.8rem%3B%22%3E%0A%20%20%20%20%20%20%3Cbutton%20onclick%3D%22sendFile%28%29%22%20style%3D%22flex%3A%201%3B%22%3EKirim%3C/button%3E%0A%20%20%20%20%20%20%3Cbutton%20class%3D%22btn-danger%22%20onclick%3D%22cancelFilePreview%28%29%22%20style%3D%22flex%3A%201%3B%22%3EBatal%3C/button%3E%0A%20%20%20%20%3C/div%3E%0A%20%20%3C/div%3E%0A%3C/div%3E%0A%0A%3Cdiv%20id%3D%22actionToast%22%3E%3C/div%3E%0A%0A%3Cscript%3E%0Aconst%20socket%20%3D%20io%28%22https%3A//chat-jsb8.onrender.com%22%29%3B%0A%0Alet%20partner%20%3D%20null%3B%0Alet%20pc%2C%20localStream%3B%0Alet%20isFront%20%3D%20true%3B%0Alet%20isPipSwapped%20%3D%20false%3B%0Alet%20callPending%20%3D%20false%3B%0Alet%20lastRTT%20%3D%200%3B%0Alet%20selectedFile%20%3D%20null%3B%0Alet%20messageIdCounter%20%3D%200%3B%20%0Alet%20messagesMap%20%3D%20%7B%7D%3B%20%0Alet%20myMicEnabled%20%3D%20true%3B%0Alet%20myCamEnabled%20%3D%20true%3B%0Alet%20partnerMicEnabled%20%3D%20true%3B%20%0Alet%20isInVideoCall%20%3D%20false%3B%20%20%20%20%20%20%20%20%0A%0Aconst%20ice%20%3D%20%7B%20iceServers%3A%20%5B%7B%20urls%3A%20%22stun%3Astun.l.google.com%3A19302%22%20%7D%5D%20%7D%3B%0A%0Asocket.on%28%27message-confirmed%27%2C%20%28%7B%20id%20%7D%29%20%3D%3E%20%7B%0A%20%20console.log%28%27Pesan%20dikonfirmasi%2C%20ID%3A%27%2C%20id%29%3B%0A%0A%20%20const%20lastMsg%20%3D%20document.querySelector%28%27.msg.me%3Alast-child%27%29%3B%0A%20%20if%20%28lastMsg%20%26%26%20lastMsg.dataset.msgId.startsWith%28%27temp-%27%29%29%20%7B%0A%20%20%20%20const%20oldTempId%20%3D%20lastMsg.dataset.msgId%3B%0A%20%20%20%20lastMsg.dataset.msgId%20%3D%20id%3B%0A%20%20%20%20messagesMap%5Bid%5D%20%3D%20lastMsg%3B%0A%20%20%20%20delete%20messagesMap%5BoldTempId%5D%3B%0A%0A%20%20%20%20const%20action%20%3D%20lastMsg.querySelector%28%27.msg-action%27%29%3B%0A%20%20%20%20if%20%28action%29%20%7B%0A%20%20%20%20%20%20action.style.display%20%3D%20%27block%27%3B%20%20%0A%20%20%20%20%7D%0A%20%20%7D%0A%7D%29%3B%0A%0Afunction%20updateMicIcons%28%29%20%7B%0A%20%20const%20isMyMicMuted%20%3D%20%21myMicEnabled%3B%0A%0A%20%20const%20localOverlay%20%3D%20document.getElementById%28%22micStatusLocal%22%29%3B%0A%20%20localOverlay%3F.classList.toggle%28%22hidden%22%2C%20%21isMyMicMuted%29%3B%0A%0A%20%20const%20remoteOverlay%20%3D%20document.getElementById%28%22micStatusRemote%22%29%3B%0A%20%20remoteOverlay%3F.classList.toggle%28%22hidden%22%2C%20partnerMicEnabled%29%3B%20%0A%7D%0A%0Alet%20isMinimizedToPartner%20%3D%20false%3B%0A%0Afunction%20minimizeToPartnerView%28%29%20%7B%0A%20%20if%20%28%21localStream%20%7C%7C%20%21document.getElementById%28%22remoteVideo%22%29.srcObject%29%20%7B%0A%20%20%20%20showToast%28%22Video%20belum%20terhubung%22%29%3B%0A%20%20%20%20return%3B%0A%20%20%7D%0A%0A%20%20isMinimizedToPartner%20%3D%20true%3B%0A%0A%20%20document.getElementById%28%22videoScreen%22%29.style.display%20%3D%20%22none%22%3B%0A%0A%20%20const%20miniContainer%20%3D%20document.getElementById%28%22miniRemoteVideoContainer%22%29%3B%0A%20%20const%20miniVideo%20%3D%20document.getElementById%28%22miniRemoteVideo%22%29%3B%0A%0A%20%20miniVideo.srcObject%20%3D%20document.getElementById%28%22remoteVideo%22%29.srcObject%3B%0A%20%20miniVideo.className%20%3D%20%22pip-mini%22%3B%20%20%20%0A%20%20miniVideo.play%28%29.catch%28e%20%3D%3E%20console.log%28%22Mini%20remote%20play%20error%3A%22%2C%20e%29%29%3B%0A%0A%20%20miniContainer.style.display%20%3D%20%22block%22%3B%0A%0A%20%20showToast%28%22Mode%20chat%20aktif%22%29%3B%0A%7D%0A%0Adocument.getElementById%28%22miniRemoteVideoContainer%22%29%3F.addEventListener%28%22click%22%2C%20function%28%29%20%7B%0A%20%20if%20%28%21isMinimizedToPartner%29%20return%3B%0A%0A%20%20isMinimizedToPartner%20%3D%20false%3B%0A%20%20document.getElementById%28%22miniRemoteVideoContainer%22%29.style.display%20%3D%20%22none%22%3B%0A%20%20document.getElementById%28%22videoScreen%22%29.style.display%20%3D%20%22flex%22%3B%0A%0A%20%20const%20remoteVideo%20%3D%20document.getElementById%28%22remoteVideo%22%29%3B%0A%20%20remoteVideo.srcObject%20%3D%20document.getElementById%28%22miniRemoteVideo%22%29.srcObject%3B%0A%0A%20%20if%20%28remoteVideo.classList.contains%28%22pip%22%29%29%20%7B%0A%20%20%20%20remoteVideo.classList.remove%28%22pip-mini%22%29%3B%0A%20%20%20%20remoteVideo.classList.add%28%22pip-normal%22%29%3B%20%20%20%0A%20%20%7D%0A%20%20resetVideoLayout%28%29%3B%0A%7D%29%3B%0A%0Alet%20isVideoMinimized%20%3D%20false%3B%0A%0Afunction%20minimizeVideoCall%28%29%20%7B%0A%20%20if%20%28%21localStream%29%20return%3B%0A%0A%20%20isVideoMinimized%20%3D%20true%3B%0A%0A%20%20document.getElementById%28%22videoScreen%22%29.style.display%20%3D%20%22none%22%3B%0A%0A%20%20const%20miniContainer%20%3D%20document.getElementById%28%22miniLocalVideoContainer%22%29%3B%0A%20%20const%20miniVideo%20%20%20%20%20%3D%20document.getElementById%28%22miniLocalVideo%22%29%3B%0A%0A%20%20miniVideo.srcObject%20%3D%20localStream%3B%0A%20%20miniVideo.play%28%29.catch%28e%20%3D%3E%20console.log%28%22Mini%20play%20error%3A%22%2C%20e%29%29%3B%0A%0A%20%20miniContainer.style.display%20%3D%20%22block%22%3B%0A%0A%20%20showToast%28%22Video%20call%20diminimalkan%20%u2022%20chat%20dibuka%20kembali%22%29%3B%0A%7D%0A%0Afunction%20updateVideoCallButton%28%29%20%7B%0A%20%20const%20btn%20%3D%20document.getElementById%28%22videoCallBtn%22%29%3B%0A%20%20if%20%28%21btn%29%20return%3B%0A%0A%20%20if%20%28isInVideoCall%29%20%7B%0A%20%20%20%20btn.style.opacity%20%3D%20%220.4%22%3B%0A%20%20%20%20btn.style.cursor%20%3D%20%22not-allowed%22%3B%0A%20%20%20%20btn.title%20%3D%20%22Sedang%20dalam%20panggilan%20video%22%3B%0A%20%20%20%20%0A%20%20%20%20btn.onclick%20%3D%20null%3B%0A%20%20%20%20%0A%20%20%7D%20else%20%7B%0A%0A%20%20%20%20btn.style.opacity%20%3D%20%221%22%3B%0A%20%20%20%20btn.style.cursor%20%3D%20%22pointer%22%3B%0A%20%20%20%20btn.title%20%3D%20%22Mulai%20video%20call%22%3B%0A%20%20%20%20%0A%20%20%20%20btn.onclick%20%3D%20callUser%3B%0A%20%20%20%20%0A%20%20%7D%0A%7D%0A%0Afunction%20restoreVideoCall%28%29%20%7B%0A%20%20if%20%28%21isVideoMinimized%29%20return%3B%0A%0A%20%20isVideoMinimized%20%3D%20false%3B%0A%0A%20%20document.getElementById%28%22miniLocalVideoContainer%22%29.style.display%20%3D%20%22none%22%3B%0A%20%20document.getElementById%28%22videoScreen%22%29.style.display%20%3D%20%22flex%22%3B%0A%0A%20%20document.getElementById%28%22localVideo%22%29.srcObject%20%3D%20localStream%3B%0A%0A%20%20showToast%28%22Kembali%20ke%20mode%20video%20penuh%22%29%3B%0A%7D%0A%0Adocument.getElementById%28%22miniLocalVideoContainer%22%29%3F.addEventListener%28%22click%22%2C%20restoreVideoCall%29%3B%0A%0Adocument.getElementById%28%22localVideo%22%29.onclick%20%3D%20function%28%29%20%7B%0A%20%20const%20local%20%20%3D%20document.getElementById%28%22localVideo%22%29%3B%0A%20%20const%20remote%20%3D%20document.getElementById%28%22remoteVideo%22%29%3B%0A%0A%20%20isPipSwapped%20%3D%20%21isPipSwapped%3B%0A%0A%20%20if%20%28isPipSwapped%29%20%7B%0A%20%20%20%20local.classList.remove%28%22pip%22%29%3B%0A%20%20%20%20local.classList.add%28%22full%22%29%3B%0A%20%20%20%20remote.classList.remove%28%22full%22%29%3B%0A%20%20%20%20remote.classList.add%28%22pip%22%29%3B%0A%20%20%7D%20else%20%7B%0A%20%20%20%20local.classList.remove%28%22full%22%29%3B%0A%20%20%20%20local.classList.add%28%22pip%22%29%3B%0A%20%20%20%20remote.classList.remove%28%22pip%22%29%3B%0A%20%20%20%20remote.classList.add%28%22full%22%29%3B%0A%0A%20%20%20%20local.style.transform%20%20%3D%20isFront%20%3F%20%22scaleX%28-1%29%22%20%3A%20%22none%22%3B%0A%20%20%20%20remote.style.transform%20%3D%20%22none%22%3B%0A%20%20%7D%0A%0A%20%20local.style.zIndex%20%20%3D%20isPipSwapped%20%3F%20%225%22%20%20%3A%20%2210%22%3B%0A%20%20remote.style.zIndex%20%3D%20isPipSwapped%20%3F%20%2210%22%20%3A%20%225%22%3B%0A%0A%20%20updateMicIcons%28%29%3B%0A%7D%3B%0A%0Alet%20pendingDeleteMsgId%20%3D%20null%3B%0Alet%20pendingDeleteBubble%20%3D%20null%3B%0Alet%20pendingDeleteAction%20%3D%20null%3B%0A%0Afunction%20openDeleteConfirm%28msgId%2C%20bubbleElement%2C%20actionElement%29%20%7B%0A%20%20pendingDeleteMsgId%20%3D%20msgId%3B%0A%20%20pendingDeleteBubble%20%3D%20bubbleElement%3B%0A%20%20pendingDeleteAction%20%3D%20actionElement%3B%0A%0A%20%20if%20%28actionElement%29%20actionElement.style.display%20%3D%20%27block%27%3B%0A%0A%20%20document.getElementById%28%22deleteConfirmModal%22%29.style.display%20%3D%20%22grid%22%3B%0A%7D%0A%0Afunction%20closeDeleteModal%28%29%20%7B%0A%20%20if%20%28pendingDeleteAction%29%20%7B%0A%20%20%20%20pendingDeleteAction.style.display%20%3D%20%27none%27%3B%0A%20%20%7D%0A%0A%20%20pendingDeleteMsgId%20%3D%20null%3B%0A%20%20pendingDeleteBubble%20%3D%20null%3B%0A%20%20pendingDeleteAction%20%3D%20null%3B%0A%20%20document.getElementById%28%22deleteConfirmModal%22%29.style.display%20%3D%20%22none%22%3B%0A%7D%0A%0Afunction%20confirmDelete%28%29%20%7B%0A%20%20if%20%28%21pendingDeleteMsgId%29%20%7B%0A%20%20%20%20closeDeleteModal%28%29%3B%0A%20%20%20%20return%3B%0A%20%20%7D%0A%0A%20%20if%20%28pendingDeleteBubble%29%20%7B%0A%20%20%20%20pendingDeleteBubble.innerHTML%20%3D%20%27Pesan%20ini%20telah%20dihapus%27%3B%0A%20%20%20%20pendingDeleteBubble.className%20%3D%20%27bubble%20deleted-msg%27%3B%0A%20%20%7D%0A%0A%20%20if%20%28pendingDeleteAction%29%20%7B%0A%20%20%20%20pendingDeleteAction.remove%28%29%3B%0A%20%20%7D%0A%0A%20%20socket.emit%28%27delete-for-everyone%27%2C%20%7B%20msgId%3A%20pendingDeleteMsgId%20%7D%29%3B%0A%0A%20%20showToast%28%22Pesan%20dihapus%22%29%3B%0A%0A%20%20closeDeleteModal%28%29%3B%0A%7D%0A%0Afunction%20showToast%28msg%29%20%7B%0A%20%20const%20t%20%3D%20document.getElementById%28%22actionToast%22%29%3B%0A%20%20t.textContent%20%3D%20msg%3B%0A%20%20t.style.opacity%20%3D%20%221%22%3B%0A%20%20t.style.transform%20%3D%20%22translateX%28-50%25%29%20translateY%280%29%22%3B%0A%20%20setTimeout%28%28%29%20%3D%3E%20%7B%0A%20%20%20%20t.style.opacity%20%3D%20%220%22%3B%0A%20%20%20%20t.style.transform%20%3D%20%22translateX%28-50%25%29%20translateY%2820px%29%22%3B%0A%20%20%7D%2C%202800%29%3B%0A%7D%0A%0Afunction%20showAlert%28text%29%20%7B%0A%20%20document.getElementById%28%22alertText%22%29.textContent%20%3D%20text%3B%0A%20%20document.getElementById%28%22alertModal%22%29.style.display%20%3D%20%22grid%22%3B%0A%7D%0A%0Afunction%20closeAlert%28%29%20%7B%0A%20%20document.getElementById%28%22alertModal%22%29.style.display%20%3D%20%22none%22%3B%0A%7D%0A%0Afunction%20showLoginForm%28%29%20%7B%0A%20%20document.getElementById%28%22welcomeContent%22%29.style.display%20%3D%20%22none%22%3B%0A%20%20document.getElementById%28%22loginForm%22%29.classList.remove%28%22hidden%22%29%3B%0A%20%20document.getElementById%28%22name%22%29.focus%28%29%3B%0A%7D%0A%0Afunction%20start%28%29%20%7B%0A%20%20const%20name%20%20%20%3D%20document.getElementById%28%22name%22%29.value.trim%28%29%20%20%20%7C%7C%20%22Anonim%22%3B%0A%20%20const%20age%20%20%20%20%3D%20document.getElementById%28%22age%22%29.value%3B%0A%20%20const%20gender%20%3D%20document.getElementById%28%22gender%22%29.value%3B%0A%20%20const%20job%20%20%20%20%3D%20document.getElementById%28%22job%22%29.value%3B%0A%20%20const%20server%20%3D%20document.getElementById%28%22server%22%29.value%3B%0A%0A%20%20window.userData%20%3D%20%7B%20name%2C%20age%2C%20gender%2C%20job%2C%20server%20%7D%3B%0A%20%20socket.emit%28%22join%22%2C%20%7B%20name%2C%20age%2C%20gender%2C%20job%2C%20server%20%7D%29%3B%0A%0A%20%20document.getElementById%28%22loginScreen%22%29.style.display%20%3D%20%22none%22%3B%0A%20%20document.getElementById%28%22searching%22%29.style.display%20%3D%20%22flex%22%3B%0A%7D%0A%0Adocument.addEventListener%28%27click%27%2C%20function%28e%29%20%7B%0A%20%20const%20wrapper%20%3D%20e.target.closest%28%27.view-once-wrapper%2C%20.normal-image-wrapper%27%29%3B%0A%20%20if%20%28%21wrapper%29%20return%3B%0A%0A%20%20const%20src%20%3D%20wrapper.dataset.src%3B%0A%20%20const%20fromName%20%3D%20wrapper.dataset.from%3B%0A%20%20const%20isViewOnce%20%3D%20wrapper.dataset.isViewonce%20%3D%3D%3D%20%27true%27%3B%0A%0A%20%20if%20%28%21src%29%20return%3B%0A%0A%20%20const%20headerText%20%3D%20isViewOnce%20%0A%20%20%20%20%3F%20%60Gambar%20dari%20%24%7BfromName%7D%60%0A%20%20%20%20%3A%20%60Gambar%20dari%20%24%7BfromName%7D%60%3B%0A%20%20%0A%20%20document.getElementById%28%27voHeader%27%29.textContent%20%3D%20headerText%3B%0A%20%20document.getElementById%28%27voFullImage%27%29.src%20%3D%20src%3B%0A%20%20document.getElementById%28%27viewOnceModal%27%29.style.display%20%3D%20%27flex%27%3B%0A%0A%20%20if%20%28isViewOnce%29%20%7B%0A%20%20%20%20const%20blurLayer%20%3D%20wrapper.querySelector%28%27.view-once-blur%27%29%3B%0A%20%20%20%20if%20%28blurLayer%29%20%7B%0A%20%20%20%20%20%20blurLayer.classList.add%28%27hidden%27%29%3B%0A%20%20%20%20%7D%0A%20%20%20%20wrapper.style.pointerEvents%20%3D%20%27none%27%3B%20%0A%20%20%20%20wrapper.style.opacity%20%3D%20%270.85%27%3B%0A%20%20%7D%0A%7D%29%3B%0A%0Afunction%20addMsg%28data%2C%20side%2C%20time%20%3D%20timeNow%28%29%29%20%7B%0A%20%20const%20div%20%3D%20document.createElement%28%22div%22%29%3B%0A%20%20div.className%20%3D%20%60msg%20%24%7Bside%7D%60%3B%0A%0A%20%20let%20msgId%20%3D%20data.id%3B%0A%20%20if%20%28msgId%29%20%7B%0A%0A%20%20%20%20div.dataset.msgId%20%3D%20msgId%3B%0A%20%20%20%20messagesMap%5BmsgId%5D%20%3D%20div%3B%0A%20%20%7D%20else%20%7B%0A%0A%20%20%20%20const%20tempId%20%3D%20%27temp-%27%20+%20Date.now%28%29%20+%20%27-%27%20+%20Math.random%28%29.toString%2836%29.substr%282%2C%209%29%3B%0A%20%20%20%20div.dataset.msgId%20%3D%20tempId%3B%0A%20%20%20%20messagesMap%5BtempId%5D%20%3D%20div%3B%0A%20%20%7D%0A%0A%20%20let%20content%20%3D%20%27%27%3B%0A%0A%20%20if%20%28data.type%20%3D%3D%3D%20%27text%27%20%7C%7C%20%21data.type%29%20%7B%0A%20%20%20%20content%20%3D%20%60%3Cdiv%20class%3D%22bubble%22%3E%24%7B%28data.text%20%7C%7C%20%27%27%29.replace%28/%5Cn/g%2C%20%27%3Cbr%3E%27%29%7D%3C/div%3E%60%3B%0A%20%20%7D%20%0A%20%20else%20if%20%28data.type%20%3D%3D%3D%20%27file%27%29%20%7B%0A%20%20%20%20let%20previewHTML%20%3D%20%27%27%3B%0A%0A%20%20%20%20const%20isViewOnce%20%3D%20data.viewOnce%20%3D%3D%3D%20true%3B%0A%20%20%20%20const%20wrapperClass%20%3D%20isViewOnce%20%3F%20%27view-once-wrapper%27%20%3A%20%27normal-image-wrapper%27%3B%0A%20%20%20%20const%20imgStyle%20%3D%20isViewOnce%20%0A%20%20%20%20%20%20%3F%20%27filter%3A%20blur%2818px%29%3B%20opacity%3A%200.45%3B%20transform%3A%20scale%281.05%29%3B%27%0A%20%20%20%20%20%20%3A%20%27filter%3A%20none%3B%20opacity%3A%201%3B%20transform%3A%20none%3B%27%3B%0A%0A%20%20%20%20previewHTML%20%3D%20%60%0A%20%20%20%20%20%20%3Cdiv%20class%3D%22%24%7BwrapperClass%7D%22%20%0A%20%20%20%20%20%20%20%20%20%20%20data-src%3D%22%24%7Bdata.fileUrl%20%7C%7C%20%27%27%7D%22%20%0A%20%20%20%20%20%20%20%20%20%20%20data-from%3D%22%24%7Bdata.fromName%20%7C%7C%20%28side%20%3D%3D%3D%20%27me%27%20%3F%20%28window.userData%3F.name%20%7C%7C%20%27Kamu%27%29%20%3A%20%28partner%3F.name%20%7C%7C%20%27Partner%27%29%29%7D%22%0A%20%20%20%20%20%20%20%20%20%20%20data-is-viewonce%3D%22%24%7BisViewOnce%20%3F%20%27true%27%20%3A%20%27false%27%7D%22%3E%0A%20%20%20%20%20%20%20%20%3Cimg%20src%3D%22%24%7Bdata.fileUrl%20%7C%7C%20%27%27%7D%22%20%0A%20%20%20%20%20%20%20%20%20%20%20%20%20class%3D%22file-preview%22%20%0A%20%20%20%20%20%20%20%20%20%20%20%20%20style%3D%22%24%7BimgStyle%7D%22%20%0A%20%20%20%20%20%20%20%20%20%20%20%20%20alt%3D%22%24%7BisViewOnce%20%3F%20%27View%20once%20image%27%20%3A%20%27Shared%20image%27%7D%22/%3E%0A%20%20%20%20%20%20%20%20%24%7BisViewOnce%20%3F%20%60%0A%20%20%20%20%20%20%20%20%20%20%3Cdiv%20class%3D%22view-once-blur%22%3E%0A%20%20%20%20%20%20%20%20%20%20%20%20%3Cdiv%20class%3D%22view-once-icon%22%3E%u23F3%3C/div%3E%0A%20%20%20%20%20%20%20%20%20%20%20%20%3Cdiv%20class%3D%22view-once-text%22%3EFoto%201x%3Cbr%3EKlik%20untuk%20melihat%3C/div%3E%0A%20%20%20%20%20%20%20%20%20%20%3C/div%3E%0A%20%20%20%20%20%20%20%20%60%20%3A%20%27%27%7D%0A%20%20%20%20%20%20%3C/div%3E%60%3B%0A%0A%20%20%20%20content%20%3D%20%60%0A%20%20%20%20%20%20%3Cdiv%20class%3D%22bubble%22%3E%0A%20%20%20%20%20%20%20%20%24%7BpreviewHTML%7D%0A%20%20%20%20%20%20%20%20%24%7Bdata.caption%20%3F%20%60%3Cp%20style%3D%22margin-top%3A8px%3B%20font-size%3A0.9rem%3B%20opacity%3A0.9%3B%22%3E%24%7Bdata.caption%7D%3C/p%3E%60%20%3A%20%27%27%7D%0A%20%20%20%20%20%20%3C/div%3E%60%3B%0A%0A%20%20%20%20if%20%28isViewOnce%29%20%7B%0A%20%20%20%20%20%20div.classList.add%28%27view-once%27%29%3B%0A%20%20%20%20%7D%0A%20%20%7D%20%0A%20%20else%20if%20%28data.type%20%3D%3D%3D%20%27deleted%27%29%20%7B%0A%20%20%20%20content%20%3D%20%60%3Cdiv%20class%3D%22bubble%20deleted-msg%22%3EPesan%20ini%20telah%20dihapus%3C/div%3E%60%3B%0A%20%20%7D%0A%0A%20%20div.innerHTML%20%3D%20%60%0A%20%20%20%20%24%7Bcontent%7D%0A%20%20%20%20%3Cdiv%20class%3D%22time%22%3E%24%7Btime%7D%3C/div%3E%0A%20%20%60%3B%0A%0A%20%20if%20%28side%20%3D%3D%3D%20%27me%27%20%26%26%20data.type%20%21%3D%3D%20%27deleted%27%29%20%7B%0A%20%20%20%20const%20action%20%3D%20document.createElement%28%27div%27%29%3B%0A%20%20%20%20action.className%20%3D%20%27msg-action%27%3B%0A%20%20%20%20action.textContent%20%3D%20%27Hapus%27%3B%0A%20%20%20%20action.style.display%20%3D%20%27none%27%3B%0A%0A%20%20%20%20action.onclick%20%3D%20%28e%29%20%3D%3E%20%7B%0A%20%20%20%20%20%20e.stopPropagation%28%29%3B%20%0A%20%20%20%20%20%20const%20currentMsgId%20%3D%20div.dataset.msgId%3B%0A%0A%20%20%20%20%20%20if%20%28currentMsgId.startsWith%28%27temp-%27%29%29%20%7B%0A%20%20%20%20%20%20%20%20showToast%28%22Pesan%20belum%20terkirim%20ke%20server%22%29%3B%0A%20%20%20%20%20%20%20%20return%3B%0A%20%20%20%20%20%20%7D%0A%0A%20%20%20%20%20%20const%20bubble%20%3D%20div.querySelector%28%27.bubble%27%29%3B%0A%20%20%20%20%20%20openDeleteConfirm%28currentMsgId%2C%20bubble%2C%20action%29%3B%0A%20%20%20%20%7D%3B%0A%0A%20%20%20%20div.appendChild%28action%29%3B%0A%0A%20%20%20%20setupInteractionForDelete%28div%2C%20action%29%3B%0A%20%20%7D%0A%0A%20%20const%20messagesContainer%20%3D%20document.getElementById%28%22messages%22%29%3B%0A%20%20messagesContainer.appendChild%28div%29%3B%0A%20%20div.scrollIntoView%28%7B%20behavior%3A%20%22smooth%22%2C%20block%3A%20%22end%22%20%7D%29%3B%0A%0A%20%20return%20div%3B%0A%7D%0A%0Afunction%20timeNow%28%29%20%7B%0A%20%20const%20d%20%3D%20new%20Date%28%29%3B%0A%20%20return%20d.getHours%28%29.toString%28%29.padStart%282%2C%220%22%29%20+%20%22%3A%22%20+%20d.getMinutes%28%29.toString%28%29.padStart%282%2C%220%22%29%3B%0A%7D%0A%0Afunction%20sendMessage%28%29%20%7B%0A%20%20const%20input%20%3D%20document.getElementById%28%22msg%22%29%3B%0A%20%20const%20text%20%3D%20input.value.trim%28%29%3B%0A%20%20if%20%28%21text%20%7C%7C%20%21partner%29%20return%3B%0A%0A%20%20addMsg%28%7B%20type%3A%20%27text%27%2C%20text%20%7D%2C%20%22me%22%29%3B%0A%0A%20%20socket.emit%28%22message%22%2C%20%7B%20type%3A%20%27text%27%2C%20text%20%7D%29%3B%0A%0A%20%20input.value%20%3D%20%22%22%3B%0A%20%20input.focus%28%29%3B%0A%7D%0A%0Afunction%20previewFile%28%29%20%7B%0A%20%20selectedFile%20%3D%20document.getElementById%28%27fileInput%27%29.files%5B0%5D%3B%0A%20%20if%20%28%21selectedFile%29%20return%3B%0A%0A%20%20const%20previewImg%20%3D%20document.getElementById%28%27previewImage%27%29%3B%0A%20%20const%20isImage%20%3D%20selectedFile.type.startsWith%28%27image/%27%29%3B%0A%0A%20%20if%20%28isImage%29%20%7B%0A%20%20%20%20const%20reader%20%3D%20new%20FileReader%28%29%3B%0A%20%20%20%20reader.onload%20%3D%20%28e%29%20%3D%3E%20%7B%0A%20%20%20%20%20%20previewImg.src%20%3D%20e.target.result%3B%0A%20%20%20%20%20%20previewImg.style.display%20%3D%20%27block%27%3B%0A%20%20%20%20%20%20document.getElementById%28%27filePreviewModal%27%29.style.display%20%3D%20%27grid%27%3B%0A%20%20%20%20%7D%3B%0A%20%20%20%20reader.readAsDataURL%28selectedFile%29%3B%0A%20%20%7D%20else%20%7B%0A%0A%20%20%20%20previewImg.src%20%3D%20%27%27%3B%20%0A%20%20%20%20previewImg.style.display%20%3D%20%27none%27%3B%0A%0A%20%20%20%20showAlert%28%22Preview%20hanya%20mendukung%20gambar%22%29%3B%0A%20%20%20%20document.getElementById%28%27filePreviewModal%27%29.style.display%20%3D%20%27grid%27%3B%0A%20%20%7D%0A%7D%0A%0Aasync%20function%20sendFile%28%29%20%7B%0A%20%20if%20%28%21selectedFile%20%7C%7C%20%21partner%29%20%7B%0A%20%20%20%20showAlert%28%22Tidak%20ada%20file%20yang%20dipilih%22%29%3B%0A%20%20%20%20return%3B%0A%20%20%7D%0A%0A%20%20const%20caption%20%3D%20document.getElementById%28%27captionInput%27%29.value.trim%28%29%3B%0A%20%20const%20viewOnce%20%3D%20document.getElementById%28%27viewOnceCheckbox%27%29.checked%3B%0A%0A%20%20const%20CLOUD_NAME%20%20%20%20%3D%20%22davgb7tjm%22%3B%20%20%20%20%20%20%0A%20%20const%20UPLOAD_PRESET%20%3D%20%22sanz-chat%22%3B%20%20%0A%0A%20%20const%20formData%20%3D%20new%20FormData%28%29%3B%0A%20%20formData.append%28%22file%22%2C%20selectedFile%29%3B%0A%20%20formData.append%28%22upload_preset%22%2C%20UPLOAD_PRESET%29%3B%0A%0A%20%20try%20%7B%0A%0A%20%20%20%20showToast%28%22Sedang%20mengirim...%22%29%3B%0A%0A%20%20%20%20const%20response%20%3D%20await%20fetch%28%60https%3A//api.cloudinary.com/v1_1/%24%7BCLOUD_NAME%7D/image/upload%60%2C%20%7B%0A%20%20%20%20%20%20method%3A%20%22POST%22%2C%0A%20%20%20%20%20%20body%3A%20formData%0A%20%20%20%20%7D%29%3B%0A%0A%20%20%20%20if%20%28%21response.ok%29%20%7B%0A%20%20%20%20%20%20const%20errData%20%3D%20await%20response.json%28%29%3B%0A%20%20%20%20%20%20throw%20new%20Error%28errData.error%3F.message%20%7C%7C%20%60Upload%20gagal%20%28HTTP%20%24%7Bresponse.status%7D%29%60%29%3B%0A%20%20%20%20%7D%0A%0A%20%20%20%20const%20data%20%3D%20await%20response.json%28%29%3B%0A%0A%20%20%20%20if%20%28%21data.secure_url%20%26%26%20%21data.url%29%20%7B%0A%20%20%20%20%20%20throw%20new%20Error%28%22Tidak%20mendapatkan%20URL%20gambar%20dari%20Cloudinary%22%29%3B%0A%20%20%20%20%7D%0A%0A%20%20%20%20const%20imageUrl%20%3D%20data.secure_url%20%7C%7C%20data.url%3B%0A%0A%20%20%20%20addMsg%28%7B%0A%20%20%20%20%20%20type%3A%20%27file%27%2C%0A%20%20%20%20%20%20fileUrl%3A%20imageUrl%2C%0A%20%20%20%20%20%20caption%3A%20caption%20%7C%7C%20undefined%2C%0A%20%20%20%20%20%20viewOnce%3A%20viewOnce%2C%0A%20%20%20%20%20%20fromName%3A%20window.userData%3F.name%20%7C%7C%20%22Anonim%22%20%0A%20%20%20%20%7D%2C%20%22me%22%29%3B%0A%0A%20%20%20%20socket.emit%28%22message%22%2C%20%7B%0A%20%20%20%20%20%20type%3A%20%27file%27%2C%0A%20%20%20%20%20%20fileUrl%3A%20imageUrl%2C%0A%20%20%20%20%20%20caption%3A%20caption%20%7C%7C%20null%2C%0A%20%20%20%20%20%20viewOnce%3A%20viewOnce%2C%0A%20%20%20%20%20%20fromName%3A%20window.userData%3F.name%20%7C%7C%20%22Anonim%22%0A%20%20%20%20%7D%29%3B%0A%0A%20%20%20%20showToast%28viewOnce%20%3F%20%22Gambar%20terkirim%21%22%20%3A%20%22Gambar%20terkirim%21%22%29%3B%0A%0A%20%20%7D%20catch%20%28err%29%20%7B%0A%20%20%20%20console.error%28%22Gagal%20upload%20ke%20Cloudinary%3A%22%2C%20err%29%3B%0A%20%20%20%20showAlert%28%22Gagal%20mengirim%20gambar%3A%5Cn%22%20+%20%28err.message%20%7C%7C%20%22Cek%20koneksi%22%29%29%3B%0A%20%20%7D%0A%0A%20%20cancelFilePreview%28%29%3B%0A%0A%20%20document.getElementById%28%27fileInput%27%29.value%20%3D%20%27%27%3B%0A%7D%0A%0Afunction%20cancelFilePreview%28%29%20%7B%0A%20%20selectedFile%20%3D%20null%3B%0A%20%20document.getElementById%28%27previewImage%27%29.style.display%20%3D%20%27none%27%3B%0A%20%20document.getElementById%28%27captionInput%27%29.value%20%3D%20%27%27%3B%0A%20%20document.getElementById%28%27viewOnceCheckbox%27%29.checked%20%3D%20false%3B%0A%20%20document.getElementById%28%27filePreviewModal%27%29.style.display%20%3D%20%27none%27%3B%0A%7D%0A%0Afunction%20setupInteractionForDelete%28msgElement%2C%20actionElement%29%20%7B%0A%20%20let%20pressTimer%3B%0A%0A%20%20msgElement.addEventListener%28%27touchstart%27%2C%20%28%29%20%3D%3E%20%7B%0A%20%20%20%20pressTimer%20%3D%20setTimeout%28%28%29%20%3D%3E%20%7B%0A%20%20%20%20%20%20msgElement.classList.add%28%27long-press%27%29%3B%0A%20%20%20%20%20%20actionElement.style.display%20%3D%20%27block%27%3B%0A%20%20%20%20%7D%2C%20500%29%3B%20%0A%20%20%7D%29%3B%0A%0A%20%20msgElement.addEventListener%28%27touchend%27%2C%20%28%29%20%3D%3E%20%7B%0A%20%20%20%20clearTimeout%28pressTimer%29%3B%0A%20%20%20%20setTimeout%28%28%29%20%3D%3E%20%7B%0A%20%20%20%20%20%20msgElement.classList.remove%28%27long-press%27%29%3B%0A%20%20%20%20%20%20actionElement.style.display%20%3D%20%27none%27%3B%20%0A%20%20%20%20%7D%2C%203000%29%3B%20%0A%20%20%7D%29%3B%0A%0A%20%20msgElement.addEventListener%28%27touchmove%27%2C%20%28%29%20%3D%3E%20%7B%0A%20%20%20%20clearTimeout%28pressTimer%29%3B%0A%20%20%20%20msgElement.classList.remove%28%27long-press%27%29%3B%0A%20%20%20%20actionElement.style.display%20%3D%20%27none%27%3B%0A%20%20%7D%29%3B%0A%0A%20%20msgElement.addEventListener%28%27click%27%2C%20%28e%29%20%3D%3E%20%7B%0A%0A%20%20%20%20if%20%28e.target%20%3D%3D%3D%20actionElement%20%7C%7C%20actionElement.contains%28e.target%29%29%20return%3B%0A%0A%20%20%20%20if%20%28msgElement.classList.contains%28%27clicked%27%29%29%20%7B%0A%20%20%20%20%20%20msgElement.classList.remove%28%27clicked%27%29%3B%0A%20%20%20%20%20%20actionElement.style.display%20%3D%20%27none%27%3B%0A%20%20%20%20%7D%20else%20%7B%0A%20%20%20%20%20%20msgElement.classList.add%28%27clicked%27%29%3B%0A%20%20%20%20%20%20actionElement.style.display%20%3D%20%27block%27%3B%0A%20%20%20%20%7D%0A%20%20%7D%29%3B%0A%7D%0A%0Afunction%20deleteForEveryone%28msgId%29%20%7B%0A%20%20if%20%28%21msgId%20%7C%7C%20msgId.startsWith%28%27temp-%27%29%29%20%7B%0A%20%20%20%20showToast%28%22Pesan%20belum%20terkirim%20ke%20server%22%29%3B%0A%20%20%20%20return%3B%0A%20%20%7D%0A%0A%20%20socket.emit%28%27delete-for-everyone%27%2C%20%7B%20msgId%20%7D%29%3B%0A%20%20updateMsgAsDeleted%28msgId%29%3B%20%0A%7D%0A%0Afunction%20updateMsgAsDeleted%28msgId%29%20%7B%0A%20%20const%20msgDiv%20%3D%20messagesMap%5BmsgId%5D%3B%0A%20%20if%20%28msgDiv%29%20%7B%0A%0A%20%20%20%20const%20bubble%20%3D%20msgDiv.querySelector%28%27.bubble%27%29%3B%0A%20%20%20%20if%20%28bubble%29%20%7B%0A%20%20%20%20%20%20bubble.innerHTML%20%3D%20%27Pesan%20ini%20telah%20dihapus%27%3B%0A%20%20%20%20%20%20bubble.className%20%3D%20%27bubble%20deleted-msg%27%3B%0A%20%20%20%20%7D%0A%0A%20%20%20%20const%20action%20%3D%20msgDiv.querySelector%28%27.msg-action%27%29%3B%0A%20%20%20%20if%20%28action%29%20action.remove%28%29%3B%0A%0A%20%20%20%20const%20timeEl%20%3D%20msgDiv.querySelector%28%27.time%27%29%3B%0A%20%20%20%20if%20%28timeEl%29%20timeEl.textContent%20%3D%20timeNow%28%29%3B%0A%20%20%7D%20else%20%7B%0A%20%20%20%20console.warn%28%60Pesan%20dengan%20ID%20%24%7BmsgId%7D%20tidak%20ditemukan%20saat%20dihapus%60%29%3B%0A%20%20%7D%0A%7D%0A%0Asocket.on%28%22matched%22%2C%20p%20%3D%3E%20%7B%0A%20%20partner%20%3D%20p%3B%0A%20%20document.getElementById%28%22searching%22%29.style.display%20%3D%20%22none%22%3B%0A%20%20document.getElementById%28%22chat%22%29.style.display%20%3D%20%22flex%22%3B%0A%20%20document.getElementById%28%22messages%22%29.innerHTML%20%3D%20%22%22%3B%0A%20%20document.getElementById%28%22partnerName%22%29.textContent%20%3D%20p.name%3B%0A%20%20document.getElementById%28%22partnerStatus%22%29.textContent%20%3D%20%22Online%22%3B%0A%20%20document.getElementById%28%22partnerStatus%22%29.className%20%3D%20%22partner-status%20status-online%22%3B%0A%20%20document.getElementById%28%22msg%22%29.disabled%20%3D%20false%3B%0A%20%20document.querySelector%28%22.footer%20button%22%29.disabled%20%3D%20false%3B%0A%20%20document.getElementById%28%22refreshBtn%22%29.style.display%20%3D%20%22none%22%3B%0A%20%20document.getElementById%28%22videoCallBtn%22%29.style.display%20%3D%20%22block%22%3B%0AisInVideoCall%20%3D%20false%3B%0A%20%20updateVideoCallButton%28%29%3B%20%20%20%20%20%20%20%20%20%20%0A%20%20%0A%20%20document.getElementById%28%22videoCallBtn%22%29.style.display%20%3D%20%22block%22%3B%20%20%0A%7D%29%3B%0A%0Asocket.on%28%22message%22%2C%20data%20%3D%3E%20%7B%0A%20%20const%20side%20%3D%20data.fromMe%20%3F%20%22me%22%20%3A%20%22other%22%3B%20%20%0A%20%20addMsg%28data%2C%20side%29%3B%0A%7D%29%3B%0A%0Asocket.on%28%22delete-for-everyone%22%2C%20%28%7B%20msgId%20%7D%29%20%3D%3E%20updateMsgAsDeleted%28msgId%29%29%3B%0A%0Asocket.on%28%22typing%22%2C%20%28%29%20%3D%3E%20%7B%0A%20%20const%20el%20%3D%20document.getElementById%28%22partnerStatus%22%29%3B%0A%20%20el.textContent%20%3D%20%22Sedang%20mengetik%u2026%22%3B%0A%20%20el.className%20%3D%20%22partner-status%20status-typing%22%3B%0A%20%20clearTimeout%28window.typingTm%29%3B%0A%20%20window.typingTm%20%3D%20setTimeout%28%28%29%20%3D%3E%20%7B%0A%20%20%20%20el.textContent%20%3D%20%22Online%22%3B%0A%20%20%20%20el.className%20%3D%20%22partner-status%20status-online%22%3B%0A%20%20%7D%2C%202200%29%3B%0A%7D%29%3B%0A%0Adocument.getElementById%28%22msg%22%29.oninput%20%3D%20%28%29%20%3D%3E%20socket.emit%28%22typing%22%29%3B%0A%0Asocket.on%28%22partner-left%22%2C%20%28%29%20%3D%3E%20%7B%0A%20%20document.getElementById%28%22partnerStatus%22%29.textContent%20%3D%20%22Offline%22%3B%0A%20%20document.getElementById%28%22partnerStatus%22%29.className%20%3D%20%22partner-status%20status-offline%22%3B%0A%20%20document.getElementById%28%22msg%22%29.disabled%20%3D%20true%3B%0A%20%20document.querySelector%28%22.footer%20button%22%29.disabled%20%3D%20true%3B%0A%20%20document.getElementById%28%22refreshBtn%22%29.style.display%20%3D%20%22block%22%3B%0A%7D%29%3B%0A%0Aasync%20function%20startMedia%28%29%20%7B%0A%20%20try%20%7B%0A%0A%20%20%20%20localStream%20%3D%20await%20navigator.mediaDevices.getUserMedia%28%7B%0A%20%20%20%20%20%20video%3A%20%7B%0A%20%20%20%20%20%20%20%20facingMode%3A%20%22user%22%2C%0A%20%20%20%20%20%20%20%20width%3A%20%7B%20ideal%3A%20640%20%7D%2C%0A%20%20%20%20%20%20%20%20height%3A%20%7B%20ideal%3A%20480%20%7D%2C%0A%20%20%20%20%20%20%20%20aspectRatio%3A%20%7B%20ideal%3A%204/3%20%7D%0A%20%20%20%20%20%20%7D%2C%0A%20%20%20%20%20%20audio%3A%20true%0A%20%20%20%20%7D%29%3B%0A%0A%20%20%20%20const%20videoTrack%20%3D%20localStream.getVideoTracks%28%29%5B0%5D%3B%0A%20%20%20%20const%20audioTrack%20%3D%20localStream.getAudioTracks%28%29%5B0%5D%3B%0A%0A%20%20%20%20if%20%28videoTrack%29%20%7B%0A%20%20%20%20%20%20videoTrack.enabled%20%3D%20myCamEnabled%3B%20%20%0A%20%20%20%20%7D%0A%0A%20%20%20%20if%20%28audioTrack%29%20%7B%0A%20%20%20%20%20%20audioTrack.enabled%20%3D%20myMicEnabled%3B%0A%20%20%20%20%7D%0A%0A%20%20%20%20document.getElementById%28%22camBtn%22%29.className%20%3D%20%0A%20%20%20%20%20%20%28videoTrack%20%26%26%20videoTrack.enabled%29%20%0A%20%20%20%20%20%20%20%20%3F%20%22bi%20bi-camera-video-fill%22%20%0A%20%20%20%20%20%20%20%20%3A%20%22bi%20bi-camera-video-off-fill%20muted%22%3B%0A%0A%20%20%20%20document.getElementById%28%22micBtn%22%29.className%20%3D%20%0A%20%20%20%20%20%20myMicEnabled%20%0A%20%20%20%20%20%20%20%20%3F%20%22bi%20bi-mic-fill%22%20%0A%20%20%20%20%20%20%20%20%3A%20%22bi%20bi-mic-mute-fill%20muted%22%3B%0A%0A%20%20%20%20const%20localVideo%20%3D%20document.getElementById%28%22localVideo%22%29%3B%0A%20%20%20%20localVideo.srcObject%20%3D%20localStream%3B%0A%20%20%20%20localVideo.play%28%29.catch%28e%20%3D%3E%20console.log%28%22Play%20error%3A%22%2C%20e%29%29%3B%0A%0A%20%20%20%20socket.emit%28%22media-status%22%2C%20%7B%20%0A%20%20%20%20%20%20mic%3A%20myMicEnabled%2C%0A%20%20%20%20%20%20cam%3A%20myCamEnabled%20%0A%20%20%20%20%7D%29%3B%0A%0A%20%20%20%20return%20true%3B%0A%20%20%7D%20catch%20%28err%29%20%7B%0A%20%20%20%20console.error%28%22getUserMedia%20gagal%3A%22%2C%20err%29%3B%0A%20%20%20%20showAlert%28%22Tidak%20bisa%20akses%20kamera/mikrofon%3A%20%22%20+%20err.message%29%3B%0A%20%20%20%20return%20false%3B%0A%20%20%7D%0A%7D%0A%0Afunction%20createPeer%28%29%20%7B%0A%20%20if%20%28pc%29%20pc.close%28%29%3B%0A%20%20pc%20%3D%20new%20RTCPeerConnection%28%7B%0A%20%20%20%20iceServers%3A%20%5B%0A%20%20%20%20%20%20%7B%20urls%3A%20%22stun%3Astun.l.google.com%3A19302%22%20%7D%2C%0A%20%20%20%20%20%20%7B%20urls%3A%20%22stun%3Astun1.l.google.com%3A19302%22%20%7D%2C%0A%20%20%20%20%20%20%7B%20urls%3A%20%22stun%3Astun2.l.google.com%3A19302%22%20%7D%0A%20%20%20%20%5D%0A%20%20%7D%29%3B%0A%0A%20%20pc.onicecandidate%20%3D%20e%20%3D%3E%20%7B%0A%20%20%20%20if%20%28e.candidate%29%20%7B%0A%20%20%20%20%20%20console.log%28%22Kirim%20ICE%20candidate%22%29%3B%0A%20%20%20%20%20%20socket.emit%28%22ice%22%2C%20e.candidate%29%3B%0A%20%20%20%20%7D%0A%20%20%7D%3B%0A%0A%20%20pc.oniceconnectionstatechange%20%3D%20%28%29%20%3D%3E%20%7B%0A%20%20%20%20console.log%28%22ICE%20state%3A%22%2C%20pc.iceConnectionState%29%3B%0A%20%20%20%20checkSignal%28%29%3B%20%20%0A%20%20%7D%3B%0A%0A%20%20pc.onconnectionstatechange%20%3D%20%28%29%20%3D%3E%20%7B%0A%20%20%20%20console.log%28%22Connection%20state%3A%22%2C%20pc.connectionState%29%3B%0A%20%20%20%20checkSignal%28%29%3B%20%20%0A%0A%20%20%20%20if%20%28pc.connectionState%20%3D%3D%3D%20%22connected%22%29%20%7B%0A%20%20%20%20%20%20console.log%28%22WebRTC%20CONNECTED%21%22%29%3B%0A%0A%20%20%20%20%7D%20else%20if%20%28pc.connectionState%20%3D%3D%3D%20%22failed%22%20%7C%7C%20pc.connectionState%20%3D%3D%3D%20%22disconnected%22%29%20%7B%0A%20%20%20%20%20%20console.log%28%22WebRTC%20gagal/terputus%22%29%3B%0A%20%20%20%20%20%20showToast%28%22Koneksi%20video%20terputus%22%29%3B%0A%20%20%20%20%7D%0A%20%20%7D%3B%0A%0A%20%20pc.ontrack%20%3D%20e%20%3D%3E%20%7B%0A%20%20%20%20console.log%28%22Menerima%20track%20remote%21%22%29%3B%0A%20%20%20%20const%20rv%20%3D%20document.getElementById%28%22remoteVideo%22%29%3B%0A%20%20%20%20rv.srcObject%20%3D%20e.streams%5B0%5D%3B%0A%20%20%20%20rv.play%28%29.catch%28err%20%3D%3E%20console.log%28%22Auto-play%20error%3A%22%2C%20err%29%29%3B%0A%20%20%7D%3B%0A%0A%20%20return%20pc%3B%0A%7D%0A%0Afunction%20updateConnectionUI%28%29%20%7B%0A%20%20if%20%28%21pc%29%20return%3B%0A%20%20const%20st%20%3D%20pc.connectionState%3B%0A%20%20if%20%28st%20%3D%3D%3D%20%22connected%22%29%20%7B%0A%20%20%20%20document.getElementById%28%22netStatus%22%29.style.display%20%3D%20%22flex%22%3B%0A%20%20%7D%20else%20if%20%28st%20%3D%3D%3D%20%22disconnected%22%20%7C%7C%20st%20%3D%3D%3D%20%22failed%22%29%20%7B%0A%20%20%20%20document.getElementById%28%22netStatus%22%29.style.display%20%3D%20%22none%22%3B%0A%20%20%7D%0A%7D%0A%0Aasync%20function%20updateLatency%28%29%20%7B%0A%20%20if%20%28%21pc%29%20%7B%0A%20%20%20%20console.log%28%22%5BLATENCY%5D%20pc%20tidak%20ada%20%u2192%20skip%20update%22%29%3B%0A%20%20%20%20document.getElementById%28%22netLeft%22%29.textContent%20%3D%20%22%u2014%20ms%22%3B%0A%20%20%20%20return%3B%0A%20%20%7D%0A%0A%20%20if%20%28pc.connectionState%20%21%3D%3D%20%22connected%22%29%20%7B%0A%20%20%20%20console.log%28%22%5BLATENCY%5D%20Skip%20update%3A%20state%20bukan%20connected%20%28%22%20+%20pc.connectionState%20+%20%22%29%22%29%3B%0A%20%20%20%20document.getElementById%28%22netLeft%22%29.textContent%20%3D%20%22%u2014%20ms%22%3B%0A%20%20%20%20return%3B%0A%20%20%7D%0A%0A%20%20console.log%28%22%5BLATENCY%5D%20Mulai%20ambil%20stats%20RTC...%22%29%3B%0A%0A%20%20try%20%7B%0A%20%20%20%20const%20stats%20%3D%20await%20pc.getStats%28%29%3B%0A%20%20%20%20let%20rtt%20%3D%20-1%3B%0A%20%20%20%20let%20foundAny%20%3D%20false%3B%0A%0A%20%20%20%20stats.forEach%28report%20%3D%3E%20%7B%0A%20%20%20%20%20%20if%20%28report.type%20%3D%3D%3D%20%27candidate-pair%27%29%20%7B%0A%20%20%20%20%20%20%20%20if%20%28report.currentRoundTripTime%20%21%3D%3D%20undefined%20%26%26%20report.currentRoundTripTime%20%3E%200%29%20%7B%0A%20%20%20%20%20%20%20%20%20%20if%20%28report.nominated%20%7C%7C%20report.selectedCandidatePairId%20%7C%7C%20report.state%20%3D%3D%3D%20%27succeeded%27%29%20%7B%0A%20%20%20%20%20%20%20%20%20%20%20%20rtt%20%3D%20Math.round%28report.currentRoundTripTime%20*%201000%29%3B%0A%20%20%20%20%20%20%20%20%20%20%20%20foundAny%20%3D%20true%3B%0A%20%20%20%20%20%20%20%20%20%20%20%20console.log%28%22%5BLATENCY%5D%20Dapat%20RTT%20dari%20candidate-pair%20%28nominated/succeeded%29%3A%22%2C%20rtt%2C%20%22ms%22%29%3B%0A%20%20%20%20%20%20%20%20%20%20%7D%0A%20%20%20%20%20%20%20%20%7D%0A%20%20%20%20%20%20%7D%0A%20%20%20%20%7D%29%3B%0A%0A%20%20%20%20if%20%28rtt%20%3D%3D%3D%20-1%29%20%7B%0A%20%20%20%20%20%20stats.forEach%28report%20%3D%3E%20%7B%0A%20%20%20%20%20%20%20%20if%20%28report.type%20%3D%3D%3D%20%27candidate-pair%27%20%26%26%20report.currentRoundTripTime%20%3E%200%29%20%7B%0A%20%20%20%20%20%20%20%20%20%20rtt%20%3D%20Math.round%28report.currentRoundTripTime%20*%201000%29%3B%0A%20%20%20%20%20%20%20%20%20%20foundAny%20%3D%20true%3B%0A%20%20%20%20%20%20%20%20%20%20console.log%28%22%5BLATENCY%5D%20Dapat%20RTT%20dari%20candidate-pair%20%28fallback%29%3A%22%2C%20rtt%2C%20%22ms%22%29%3B%0A%20%20%20%20%20%20%20%20%7D%0A%20%20%20%20%20%20%7D%29%3B%0A%20%20%20%20%7D%0A%0A%20%20%20%20if%20%28rtt%20%3D%3D%3D%20-1%29%20%7B%0A%20%20%20%20%20%20stats.forEach%28report%20%3D%3E%20%7B%0A%20%20%20%20%20%20%20%20if%20%28report.type%20%3D%3D%3D%20%27remote-inbound-rtp%27%20%26%26%20report.roundTripTime%20%3E%200%29%20%7B%0A%20%20%20%20%20%20%20%20%20%20rtt%20%3D%20Math.round%28report.roundTripTime%20*%201000%29%3B%0A%20%20%20%20%20%20%20%20%20%20foundAny%20%3D%20true%3B%0A%20%20%20%20%20%20%20%20%20%20console.log%28%22%5BLATENCY%5D%20Dapat%20RTT%20dari%20remote-inbound-rtp%3A%22%2C%20rtt%2C%20%22ms%22%29%3B%0A%20%20%20%20%20%20%20%20%7D%0A%20%20%20%20%20%20%7D%29%3B%0A%20%20%20%20%7D%0A%0A%20%20%20%20const%20netLeft%20%3D%20document.getElementById%28%22netLeft%22%29%3B%0A%20%20%20%20const%20netPill%20%3D%20document.getElementById%28%22netStatus%22%29%3B%0A%0A%20%20%20%20if%20%28rtt%20%3E%200%20%26%26%20%21isNaN%28rtt%29%29%20%7B%0A%20%20%20%20%20%20lastRTT%20%3D%20rtt%3B%0A%20%20%20%20%20%20netLeft.textContent%20%3D%20%60%24%7BlastRTT%7D%20ms%60%3B%0A%20%20%20%20%20%20console.log%28%22%5BLATENCY%5D%20Sukses%20update%20UI%20%u2192%22%2C%20lastRTT%2C%20%22ms%22%29%3B%0A%0A%20%20%20%20%20%20netPill.style.color%20%3D%20%27%2334d399%27%3B%0A%20%20%20%20%20%20netPill.style.borderColor%20%3D%20%27%230f9d6e%27%3B%0A%0A%20%20%20%20%20%20if%20%28lastRTT%20%3E%20150%29%20%7B%0A%20%20%20%20%20%20%20%20netPill.style.color%20%3D%20%27%23f59e0b%27%3B%0A%20%20%20%20%20%20%20%20netPill.style.borderColor%20%3D%20%27%23d97706%27%3B%0A%20%20%20%20%20%20%7D%0A%20%20%20%20%20%20if%20%28lastRTT%20%3E%20300%29%20%7B%0A%20%20%20%20%20%20%20%20netPill.style.color%20%3D%20%27%23ef4444%27%3B%0A%20%20%20%20%20%20%20%20netPill.style.borderColor%20%3D%20%27%23b91c1c%27%3B%0A%20%20%20%20%20%20%7D%0A%20%20%20%20%7D%20else%20%7B%0A%20%20%20%20%20%20netLeft.textContent%20%3D%20foundAny%20%3F%20%22%u2014%20ms%22%20%3A%20%22No%20RTT%22%3B%0A%20%20%20%20%20%20netPill.style.color%20%3D%20%27%2394a3b8%27%3B%0A%20%20%20%20%20%20netPill.style.borderColor%20%3D%20%27%23475569%27%3B%0A%20%20%20%20%20%20console.log%28%22%5BLATENCY%5D%20RTT%20tidak%20ditemukan%20atau%200%20%u2192%20tampil%22%2C%20netLeft.textContent%29%3B%0A%20%20%20%20%7D%0A%20%20%7D%20catch%20%28err%29%20%7B%0A%20%20%20%20console.error%28%22%5BLATENCY%5D%20Error%20saat%20getStats%3A%22%2C%20err.name%2C%20err.message%29%3B%0A%20%20%20%20document.getElementById%28%22netLeft%22%29.textContent%20%3D%20%22Err%22%3B%0A%20%20%20%20document.getElementById%28%22netStatus%22%29.style.color%20%3D%20%27%23ef4444%27%3B%0A%20%20%20%20document.getElementById%28%22netStatus%22%29.style.borderColor%20%3D%20%27%23b91c1c%27%3B%0A%20%20%7D%0A%7D%0A%0Afunction%20checkSignal%28%29%20%7B%0A%20%20if%20%28%21pc%29%20%7B%0A%20%20%20%20console.log%28%22%5BNET%5D%20pc%20tidak%20ada%20%u2192%20hide%20pill%22%29%3B%0A%20%20%20%20document.getElementById%28%22netStatus%22%29.style.display%20%3D%20%22none%22%3B%0A%20%20%20%20return%3B%0A%20%20%7D%0A%0A%20%20const%20state%20%3D%20pc.connectionState%3B%0A%20%20console.log%28%22%5BNET%5D%20Connection%20state%20saat%20ini%3A%22%2C%20state%29%3B%0A%0A%20%20const%20netPill%20%3D%20document.getElementById%28%22netStatus%22%29%3B%0A%0A%20%20if%20%28state%20%3D%3D%3D%20%22connected%22%29%20%7B%0A%20%20%20%20console.log%28%22%5BNET%5D%20CONNECTED%20%u2192%20tampilkan%20pill%20%26%20mulai%20latency%22%29%3B%0A%20%20%20%20netPill.style.display%20%3D%20%22flex%22%3B%0A%20%20%20%20updateLatency%28%29%3B%20%20%0A%20%20%20%20clearInterval%28window.latencyInterval%29%3B%0A%20%20%20%20window.latencyInterval%20%3D%20setInterval%28%28%29%20%3D%3E%20%7B%0A%20%20%20%20%20%20console.log%28%22%5BNET%5D%20Update%20latency%20interval...%22%29%3B%0A%20%20%20%20%20%20updateLatency%28%29%3B%0A%20%20%20%20%7D%2C%201000%29%3B%20%20%0A%20%20%7D%20else%20if%20%28state%20%3D%3D%3D%20%22connecting%22%20%7C%7C%20state%20%3D%3D%3D%20%22new%22%29%20%7B%0A%20%20%20%20console.log%28%22%5BNET%5D%20Connecting%20%u2192%20tampilkan%20%27Connecting...%27%22%29%3B%0A%20%20%20%20netPill.style.display%20%3D%20%22flex%22%3B%0A%20%20%20%20document.getElementById%28%22netLeft%22%29.textContent%20%3D%20%22Connecting...%22%3B%0A%20%20%7D%20else%20%7B%0A%20%20%20%20console.log%28%22%5BNET%5D%20State%20lain%20%28%22%20+%20state%20+%20%22%29%20%u2192%20sembunyikan%20pill%22%29%3B%0A%20%20%20%20netPill.style.display%20%3D%20%22none%22%3B%0A%20%20%20%20clearInterval%28window.latencyInterval%29%3B%0A%20%20%20%20document.getElementById%28%22netLeft%22%29.textContent%20%3D%20%22%u2014%20ms%22%3B%0A%20%20%20%20lastRTT%20%3D%200%3B%0A%20%20%7D%0A%7D%0A%0Aasync%20function%20callUser%28%29%20%7B%0A%20%20if%20%28%21partner%29%20%7B%0A%20%20%20%20showAlert%28%22Belum%20ada%20yang%20terhubung%21%22%29%3B%0A%20%20%20%20return%3B%0A%20%20%7D%0A%0A%20%20isInVideoCall%20%3D%20true%3B%0A%20%20updateVideoCallButton%28%29%3B%0A%0A%20%20const%20waitingModal%20%3D%20document.getElementById%28%22waitingModal%22%29%3B%0A%20%20const%20waitingText%20%3D%20document.getElementById%28%22waitingText%22%29%3B%0A%20%20waitingText.textContent%20%3D%20%22Menunggu%20%22%20+%20%28partner.name%20%7C%7C%20%22partner%22%29%20+%20%22%20menerima%20panggilan...%22%3B%0A%20%20waitingModal.style.display%20%3D%20%22grid%22%3B%0A%0A%20%20window.callTm%20%3D%20setTimeout%28%28%29%20%3D%3E%20%7B%0A%20%20%20%20if%20%28waitingModal.style.display%20%3D%3D%3D%20%22grid%22%29%20%7B%0A%20%20%20%20%20%20waitingModal.style.display%20%3D%20%22none%22%3B%0A%20%20%20%20%20%20showAlert%28%22Panggilan%20tidak%20dijawab.%22%29%3B%0A%20%20%20%20%20%20isInVideoCall%20%3D%20false%3B%0A%20%20%20%20%20%20updateVideoCallButton%28%29%3B%0A%20%20%20%20%7D%0A%20%20%7D%2C%2030000%29%3B%0A%0A%20%20try%20%7B%0A%20%20%20%20const%20hasMedia%20%3D%20await%20startMedia%28%29%3B%0A%20%20%20%20if%20%28%21hasMedia%29%20%7B%0A%20%20%20%20%20%20waitingModal.style.display%20%3D%20%22none%22%3B%0A%20%20%20%20%20%20isInVideoCall%20%3D%20false%3B%0A%20%20%20%20%20%20updateVideoCallButton%28%29%3B%0A%20%20%20%20%20%20return%3B%0A%20%20%20%20%7D%0A%0A%20%20%20%20createPeer%28%29%3B%0A%0A%20%20%20%20localStream.getTracks%28%29.forEach%28track%20%3D%3E%20%7B%0A%20%20%20%20%20%20pc.addTrack%28track%2C%20localStream%29%3B%0A%20%20%20%20%7D%29%3B%0A%0A%20%20%20%20socket.emit%28%22call-user%22%29%3B%0A%0A%20%20%7D%20catch%20%28err%29%20%7B%0A%20%20%20%20console.error%28%22Gagal%20memulai%20panggilan%3A%22%2C%20err%29%3B%0A%20%20%20%20waitingModal.style.display%20%3D%20%22none%22%3B%0A%20%20%20%20isInVideoCall%20%3D%20false%3B%0A%20%20%20%20updateVideoCallButton%28%29%3B%0A%20%20%20%20showAlert%28%22Gagal%20memulai%20video%20call%3A%20%22%20+%20err.message%29%3B%0A%20%20%7D%0A%7D%0A%0Asocket.on%28%22incoming-call%22%2C%20d%20%3D%3E%20%7B%0A%20%20document.getElementById%28%22callerName%22%29.textContent%20%3D%20d.name%3B%0A%20%20document.getElementById%28%22incomingCall%22%29.style.display%20%3D%20%22grid%22%3B%0A%7D%29%3B%0A%0Asocket.on%28%22call-accepted%22%2C%20async%20%28%29%20%3D%3E%20%7B%0A%20%20console.log%28%22%5BCALLER%5D%20Panggilan%20diterima%20oleh%20partner%22%29%3B%0A%0A%20%20clearTimeout%28window.callTm%29%3B%0A%0A%20%20const%20waitingModal%20%3D%20document.getElementById%28%22waitingModal%22%29%3B%0A%20%20if%20%28waitingModal%29%20%7B%0A%20%20%20%20waitingModal.style.display%20%3D%20%22none%22%3B%0A%20%20%7D%0A%0A%20%20callPending%20%3D%20false%3B%0A%0A%20%20try%20%7B%0A%0A%20%20%20%20if%20%28%21localStream%29%20%7B%0A%20%20%20%20%20%20const%20hasMedia%20%3D%20await%20startMedia%28%29%3B%0A%20%20%20%20%20%20if%20%28%21hasMedia%29%20%7B%0A%20%20%20%20%20%20%20%20showAlert%28%22Gagal%20mengakses%20kamera/mikrofon%20setelah%20panggilan%20diterima%22%29%3B%0A%20%20%20%20%20%20%20%20return%3B%0A%20%20%20%20%20%20%7D%0A%20%20%20%20%7D%0A%0A%20%20%20%20createPeer%28%29%3B%0A%0A%20%20%20%20localStream.getTracks%28%29.forEach%28track%20%3D%3E%20%7B%0A%20%20%20%20%20%20pc.addTrack%28track%2C%20localStream%29%3B%0A%20%20%20%20%20%20console.log%28%22%5BCALLER%5D%20Track%20ditambahkan%20ke%20pc%20setelah%20accepted%3A%22%2C%20track.kind%29%3B%0A%20%20%20%20%7D%29%3B%0A%0A%20%20%20%20const%20offer%20%3D%20await%20pc.createOffer%28%29%3B%0A%20%20%20%20await%20pc.setLocalDescription%28offer%29%3B%0A%20%20%20%20socket.emit%28%22offer%22%2C%20offer%29%3B%0A%20%20%20%20console.log%28%22%5BCALLER%5D%20Offer%20dikirim%20setelah%20accepted%22%29%3B%0A%0A%20%20%20%20document.getElementById%28%22videoScreen%22%29.style.display%20%3D%20%22flex%22%3B%0A%20%20%20%20document.getElementById%28%22callName%22%29.textContent%20%3D%20partner%3F.name%20%7C%7C%20%22Partner%22%3B%0A%0A%20%20%20%20resetVideoLayout%28%29%3B%0A%20%20%20%20checkSignal%28%29%3B%0A%0A%20%20%20%20showToast%28%22Menghubungkan...%22%29%3B%0A%0A%20%20%7D%20catch%20%28err%29%20%7B%0A%20%20%20%20console.error%28%22%5BCALLER%5D%20Error%20setelah%20call-accepted%3A%22%2C%20err%29%3B%0A%20%20%20%20showAlert%28%22Gagal%20menghubungkan%20video%20call%3A%20%22%20+%20err.message%29%3B%0A%0A%20%20%20%20if%20%28waitingModal%29%20waitingModal.style.display%20%3D%20%22none%22%3B%0A%20%20%20%20document.getElementById%28%22videoScreen%22%29.style.display%20%3D%20%22none%22%3B%0A%20%20%20%20endCall%28%29%3B%20%0A%20%20%7D%0A%7D%29%3B%0A%0Afunction%20resetVideoLayout%28%29%20%7B%0A%20%20const%20local%20%20%3D%20document.getElementById%28%22localVideo%22%29%3B%0A%20%20const%20remote%20%3D%20document.getElementById%28%22remoteVideo%22%29%3B%0A%0A%20%20isPipSwapped%20%3D%20false%3B%0A%0A%20%20local.className%20%20%3D%20%22pip%20pip-normal%22%3B%0A%20%20remote.className%20%3D%20%22full%22%3B%0A%0A%20%20local.style.zIndex%20%3D%20%2210%22%3B%0A%20%20remote.style.zIndex%20%3D%20%225%22%3B%0A%0A%20%20local.classList.remove%28%22pip-mini%22%29%3B%0A%20%20remote.classList.remove%28%22pip-mini%22%29%3B%0A%0A%20%20local.style.transform%20%20%3D%20isFront%20%3F%20%22scaleX%28-1%29%22%20%3A%20%22none%22%3B%0A%20%20remote.style.transform%20%3D%20%22none%22%3B%0A%7D%0A%0Asocket.on%28%22offer%22%2C%20async%20o%20%3D%3E%20%7B%0A%20%20if%20%28%21pc%29%20createPeer%28%29%3B%0A%20%20await%20pc.setRemoteDescription%28o%29%3B%0A%20%20const%20ans%20%3D%20await%20pc.createAnswer%28%29%3B%0A%20%20await%20pc.setLocalDescription%28ans%29%3B%0A%20%20socket.emit%28%22answer%22%2C%20ans%29%3B%0A%7D%29%3B%0A%0Asocket.on%28%22answer%22%2C%20a%20%3D%3E%20pc.setRemoteDescription%28a%29%29%3B%0A%0Asocket.on%28%22ice%22%2C%20c%20%3D%3E%20pc%3F.addIceCandidate%28new%20RTCIceCandidate%28c%29%29%29%3B%0A%0Aasync%20function%20acceptCall%28%29%20%7B%0A%20%20document.getElementById%28%22incomingCall%22%29.style.display%20%3D%20%22none%22%3B%0A%0A%20%20const%20hasMedia%20%3D%20await%20startMedia%28%29%3B%0A%20%20if%20%28%21hasMedia%29%20return%3B%0A%0A%20%20createPeer%28%29%3B%20%20%0A%0A%20%20localStream.getTracks%28%29.forEach%28track%20%3D%3E%20%7B%0A%20%20%20%20pc.addTrack%28track%2C%20localStream%29%3B%0A%20%20%20%20console.log%28%22Track%20lokal%20ditambahkan%20ke%20pc%3A%22%2C%20track.kind%29%3B%20%0A%20%20%7D%29%3B%0A%0A%20%20try%20%7B%0A%20%20%20%20const%20offer%20%3D%20await%20pc.createOffer%28%29%3B%0A%20%20%20%20await%20pc.setLocalDescription%28offer%29%3B%0A%20%20%20%20socket.emit%28%22offer%22%2C%20offer%29%3B%0A%20%20%20%20console.log%28%22Offer%20dikirim%20dari%20penerima%20panggilan%22%29%3B%0A%20%20%7D%20catch%20%28err%29%20%7B%0A%20%20%20%20console.error%28%22Gagal%20membuat%20offer%20di%20acceptCall%3A%22%2C%20err%29%3B%0A%20%20%20%20showAlert%28%22Gagal%20memulai%20video%20call%3A%20%22%20+%20err.message%29%3B%0A%20%20%20%20return%3B%0A%20%20%7D%0A%0A%20%20socket.emit%28%22accept-call%22%29%3B%0A%0A%20%20document.getElementById%28%22videoScreen%22%29.style.display%20%3D%20%22flex%22%3B%0A%20%20document.getElementById%28%22callName%22%29.textContent%20%3D%20partner%3F.name%20%7C%7C%20%22Partner%22%3B%0A%0A%20%20resetVideoLayout%28%29%3B%0A%7D%0A%0Afunction%20rejectCall%28%29%20%7B%0A%20%20document.getElementById%28%22incomingCall%22%29.style.display%20%3D%20%22none%22%3B%0A%20%20socket.emit%28%22reject-call%22%29%3B%0A%7D%0A%0Asocket.on%28%22call-rejected%22%2C%20%28%29%20%3D%3E%20%7B%0A%20%20clearTimeout%28window.callTm%29%3B%0A%20%20document.getElementById%28%22waitingModal%22%29.style.display%20%3D%20%22none%22%3B%0A%20%20document.getElementById%28%22rejectedText%22%29.textContent%20%3D%20%60%24%7Bpartner%3F.name%20%7C%7C%20%22Partner%22%7D%20menolak%20panggilan.%60%3B%0A%20%20document.getElementById%28%22rejectedModal%22%29.style.display%20%3D%20%22grid%22%3B%0A%7D%29%3B%0A%0Asocket.on%28%22media-status%22%2C%20%28status%29%20%3D%3E%20%7B%0A%20%20if%20%28status.mic%20%21%3D%3D%20undefined%29%20%7B%0A%20%20%20%20partnerMicEnabled%20%3D%20status.mic%3B%20%20%0A%20%20%20%20updateMicIcons%28%29%3B%0A%20%20%7D%0A%7D%29%3B%0A%0Afunction%20endCall%28%29%20%7B%0A%0A%20%20if%20%28pc%29%20%7B%0A%20%20%20%20pc.close%28%29%3B%0A%20%20%20%20pc%20%3D%20null%3B%0A%20%20%7D%0A%0A%20%20if%20%28localStream%29%20%7B%0A%20%20%20%20localStream.getTracks%28%29.forEach%28track%20%3D%3E%20track.stop%28%29%29%3B%0A%20%20%20%20localStream%20%3D%20null%3B%0A%20%20%7D%0A%0A%20%20const%20videoScreen%20%3D%20document.getElementById%28%22videoScreen%22%29%3B%0A%20%20if%20%28videoScreen%29%20videoScreen.style.display%20%3D%20%22none%22%3B%0A%0A%20%20const%20netStatus%20%3D%20document.getElementById%28%22netStatus%22%29%3B%0A%20%20if%20%28netStatus%29%20netStatus.style.display%20%3D%20%22none%22%3B%0A%0A%20%20socket.emit%28%22end-call%22%29%3B%0A%0A%20%20isPipSwapped%20%3D%20false%3B%0A%20%20isVideoMinimized%20%3D%20false%3B%0A%20%20isMinimizedToPartner%20%3D%20false%3B%0A%20%20isInVideoCall%20%3D%20false%3B%20%20%20%20%20%20%20%20%20%20%20%20%20%20%0A%20%20%0A%20%20const%20miniContainer%20%3D%20document.getElementById%28%22miniRemoteVideoContainer%22%29%3B%0A%20%20if%20%28miniContainer%29%20%7B%0A%20%20%20%20miniContainer.style.display%20%3D%20%22none%22%3B%0A%20%20%7D%0A%0A%20%20const%20miniVideo%20%3D%20document.getElementById%28%22miniRemoteVideo%22%29%3B%0A%20%20if%20%28miniVideo%29%20%7B%0A%20%20%20%20miniVideo.srcObject%20%3D%20null%3B%0A%20%20%7D%0A%0A%20%20const%20micBtn%20%3D%20document.getElementById%28%22micBtn%22%29%3B%0A%20%20if%20%28micBtn%29%20%7B%0A%20%20%20%20micBtn.className%20%3D%20myMicEnabled%20%0A%20%20%20%20%20%20%3F%20%22bi%20bi-mic-fill%22%20%0A%20%20%20%20%20%20%3A%20%22bi%20bi-mic-mute-fill%20muted%22%3B%0A%20%20%7D%0A%0A%20%20const%20camBtn%20%3D%20document.getElementById%28%22camBtn%22%29%3B%0A%20%20if%20%28camBtn%29%20%7B%0A%0A%20%20%20%20camBtn.className%20%3D%20myCamEnabled%20%0A%20%20%20%20%20%20%3F%20%22bi%20bi-camera-video-fill%22%20%0A%20%20%20%20%20%20%3A%20%22bi%20bi-camera-video-off-fill%20muted%22%3B%0A%20%20%7D%0A%0A%20%20const%20remoteMicOverlay%20%3D%20document.getElementById%28%22micStatusRemote%22%29%3B%0A%20%20if%20%28remoteMicOverlay%29%20remoteMicOverlay.classList.add%28%22hidden%22%29%3B%0A%0A%20%20const%20localMicOverlay%20%3D%20document.getElementById%28%22micStatusLocal%22%29%3B%0A%20%20if%20%28localMicOverlay%29%20localMicOverlay.classList.add%28%22hidden%22%29%3B%0A%0A%20%20updateVideoCallButton%28%29%3B%0A%0A%20%20showToast%28%22Panggilan%20video%20diakhiri%22%29%3B%0A%7D%0A%0Asocket.on%28%22end-call%22%2C%20endCall%29%3B%0A%0Adocument.getElementById%28%22localVideo%22%29.onclick%20%3D%20function%28%29%20%7B%0A%20%20const%20local%20%20%3D%20document.getElementById%28%22localVideo%22%29%3B%0A%20%20const%20remote%20%3D%20document.getElementById%28%22remoteVideo%22%29%3B%0A%0A%20%20isPipSwapped%20%3D%20%21isPipSwapped%3B%0A%0A%20%20if%20%28isPipSwapped%29%20%7B%0A%20%20%20%20local.classList.remove%28%22pip%22%29%3B%0A%20%20%20%20local.classList.add%28%22full%22%29%3B%0A%20%20%20%20remote.classList.remove%28%22full%22%29%3B%0A%20%20%20%20remote.classList.add%28%22pip%22%29%3B%0A%0A%20%20%7D%20else%20%7B%0A%20%20%20%20local.classList.remove%28%22full%22%29%3B%0A%20%20%20%20local.classList.add%28%22pip%22%29%3B%0A%20%20%20%20remote.classList.remove%28%22pip%22%29%3B%0A%20%20%20%20remote.classList.add%28%22full%22%29%3B%0A%0A%20%20%20%20local.style.transform%20%20%3D%20isFront%20%3F%20%22scaleX%28-1%29%22%20%3A%20%22none%22%3B%0A%20%20%20%20remote.style.transform%20%3D%20%22none%22%3B%0A%0A%20%20%7D%0A%0A%20%20local.style.zIndex%20%20%3D%20isPipSwapped%20%3F%20%225%22%20%20%3A%20%2210%22%3B%0A%20%20remote.style.zIndex%20%3D%20isPipSwapped%20%3F%20%2210%22%20%3A%20%225%22%3B%0A%7D%3B%0A%0Aasync%20function%20switchCamera%28%29%20%7B%0A%20%20if%20%28%21localStream%29%20%7B%0A%20%20%20%20showAlert%28%22Kamera%20belum%20aktif%22%29%3B%0A%20%20%20%20return%3B%0A%20%20%7D%0A%0A%20%20try%20%7B%0A%0A%20%20%20%20const%20oldVideoTrack%20%3D%20localStream.getVideoTracks%28%29%5B0%5D%3B%0A%20%20%20%20if%20%28oldVideoTrack%29%20%7B%0A%20%20%20%20%20%20oldVideoTrack.stop%28%29%3B%20%20%20%20%20%20%20%20%20%20%20%0A%20%20%20%20%20%20localStream.removeTrack%28oldVideoTrack%29%3B%20%0A%20%20%20%20%7D%0A%0A%20%20%20%20const%20mode%20%3D%20isFront%20%3F%20%22environment%22%20%3A%20%22user%22%3B%0A%20%20%20%20isFront%20%3D%20%21isFront%3B%20%0A%0A%20%20%20%20const%20newConstraints%20%3D%20%7B%0A%20%20%20%20%20%20video%3A%20%7B%0A%20%20%20%20%20%20%20%20facingMode%3A%20%7B%20exact%3A%20mode%20%7D%2C%20%20%20%20%20%20%20%20%20%20%0A%20%20%20%20%20%20%20%20width%3A%20%7B%20ideal%3A%20640%20%7D%2C%20%20%20%20%20%20%20%20%20%20%20%20%20%20%0A%20%20%20%20%20%20%20%20height%3A%20%7B%20ideal%3A%20480%20%7D%2C%20%20%20%20%20%20%20%20%20%20%20%20%20%0A%20%20%20%20%20%20%20%20aspectRatio%3A%20%7B%20ideal%3A%204/3%20%7D%2C%20%20%20%20%20%20%20%20%20%20%20%0A%20%20%20%20%20%20%20%20frameRate%3A%20%7B%20ideal%3A%2030%20%7D%0A%20%20%20%20%20%20%7D%0A%20%20%20%20%7D%3B%0A%0A%20%20%20%20const%20newStream%20%3D%20await%20navigator.mediaDevices.getUserMedia%28newConstraints%29%3B%0A%0A%20%20%20%20const%20newVideoTrack%20%3D%20newStream.getVideoTracks%28%29%5B0%5D%3B%0A%20%20%20%20if%20%28%21newVideoTrack%29%20%7B%0A%20%20%20%20%20%20throw%20new%20Error%28%22Tidak%20ada%20track%20video%20baru%22%29%3B%0A%20%20%20%20%7D%0A%0A%20%20%20%20localStream.addTrack%28newVideoTrack%29%3B%0A%0A%20%20%20%20const%20localVideo%20%3D%20document.getElementById%28%22localVideo%22%29%3B%0A%20%20%20%20%0A%20%20%20%20localVideo.srcObject%20%3D%20null%3B%0A%20%20%20%20await%20new%20Promise%28resolve%20%3D%3E%20setTimeout%28resolve%2C%2050%29%29%3B%20%0A%20%20%20%20localVideo.srcObject%20%3D%20localStream%3B%0A%20%20%20%20localVideo.play%28%29.catch%28e%20%3D%3E%20console.log%28%22Play%20error%3A%22%2C%20e%29%29%3B%0A%0A%20%20%20%20if%20%28pc%29%20%7B%0A%20%20%20%20%20%20const%20videoSender%20%3D%20pc.getSenders%28%29.find%28s%20%3D%3E%20s.track%20%26%26%20s.track.kind%20%3D%3D%3D%20%22video%22%29%3B%0A%20%20%20%20%20%20if%20%28videoSender%29%20%7B%0A%20%20%20%20%20%20%20%20await%20videoSender.replaceTrack%28newVideoTrack%29%3B%0A%20%20%20%20%20%20%20%20console.log%28%22Track%20video%20berhasil%20diganti%20di%20peer%20connection%22%29%3B%0A%20%20%20%20%20%20%7D%20else%20%7B%0A%20%20%20%20%20%20%20%20console.warn%28%22Tidak%20menemukan%20video%20sender%22%29%3B%0A%20%20%20%20%20%20%7D%0A%20%20%20%20%7D%0A%0A%20%20%20%20showToast%28%60Kamera%20%24%7BisFront%20%3F%20%22depan%22%20%3A%20%22belakang%22%7D%20aktif%60%29%3B%0A%0A%20%20%7D%20catch%20%28err%29%20%7B%0A%20%20%20%20console.error%28%22Switch%20camera%20gagal%3A%22%2C%20err.name%2C%20err.message%29%3B%0A%20%20%20%20showAlert%28%22Gagal%20ganti%20kamera%3A%20%22%20+%20%28err.message%20%7C%7C%20%22Coba%20restart%20halaman%22%29%29%3B%0A%0A%20%20%20%20isFront%20%3D%20%21isFront%3B%0A%20%20%7D%0A%7D%0A%0Afunction%20closeViewOnce%28%29%20%7B%0A%20%20const%20modal%20%3D%20document.getElementById%28%27viewOnceModal%27%29%3B%0A%20%20const%20img%20%3D%20document.getElementById%28%27voFullImage%27%29%3B%0A%20%20%0A%20%20modal.style.display%20%3D%20%27none%27%3B%0A%20%20%0A%20%20img.src%20%3D%20%27%27%3B%0A%20%20%0A%20%20document.getElementById%28%27voHeader%27%29.textContent%20%3D%20%27Foto%20dari%20...%27%3B%0A%7D%0A%0Afunction%20toggleMic%28%29%20%7B%0A%20%20if%20%28%21localStream%29%20return%3B%0A%20%20const%20tr%20%3D%20localStream.getAudioTracks%28%29%5B0%5D%3B%0A%20%20if%20%28%21tr%29%20return%3B%0A%0A%20%20myMicEnabled%20%3D%20%21myMicEnabled%3B%0A%20%20tr.enabled%20%3D%20myMicEnabled%3B%0A%0A%20%20document.getElementById%28%22micBtn%22%29.className%20%3D%20%0A%20%20%20%20myMicEnabled%20%3F%20%22bi%20bi-mic-fill%22%20%3A%20%22bi%20bi-mic-mute-fill%20muted%22%3B%0A%0A%20%20socket.emit%28%22media-status%22%2C%20%7B%20mic%3A%20myMicEnabled%20%7D%29%3B%0A%0A%20%20updateMicIcons%28%29%3B%0A%7D%0A%0Afunction%20toggleCam%28%29%20%7B%0A%20%20if%20%28%21localStream%29%20return%3B%0A%20%20const%20tr%20%3D%20localStream.getVideoTracks%28%29%5B0%5D%3B%0A%20%20if%20%28%21tr%29%20return%3B%0A%0A%20%20myCamEnabled%20%3D%20%21myCamEnabled%3B%0A%20%20tr.enabled%20%3D%20myCamEnabled%3B%0A%0A%20%20document.getElementById%28%22camBtn%22%29.className%20%3D%20%0A%20%20%20%20myCamEnabled%20%3F%20%22bi%20bi-camera-video-fill%22%20%3A%20%22bi%20bi-camera-video-off-fill%20muted%22%3B%0A%7D%0A%0Afunction%20openProfile%28%29%20%7B%0A%20%20if%20%28%21partner%29%20return%3B%0A%0A%20%20const%20genderText%20%3D%20partner.gender%20%26%26%20partner.gender%20%21%3D%3D%20%22-%22%20%3F%20partner.gender%20%3A%20%22Tidak%20disebutkan%22%3B%0A%20%20const%20jobText%20%20%20%20%3D%20partner.job%20%20%20%20%26%26%20partner.job%20%20%20%20%21%3D%3D%20%22-%22%20%3F%20partner.job%20%20%20%20%3A%20%22Tidak%20disebutkan%22%3B%0A%0A%20%20document.getElementById%28%22profileContent%22%29.innerHTML%20%3D%20%60%0A%20%20%20%20%3Cdiv%3E%3Cb%3ENama%3A%3C/b%3E%20%24%7Bpartner.name%7D%3C/div%3E%0A%20%20%20%20%3Cdiv%3E%3Cb%3EUmur%3A%3C/b%3E%20%24%7Bpartner.age%7D%3C/div%3E%0A%20%20%20%20%3Cdiv%3E%3Cb%3EGender%3A%3C/b%3E%20%24%7BgenderText%7D%3C/div%3E%0A%20%20%20%20%3Cdiv%3E%3Cb%3EStatus%3A%3C/b%3E%20%24%7BjobText%7D%3C/div%3E%0A%20%20%20%20%3Cdiv%3E%3Cb%3EServer%3A%3C/b%3E%20%24%7Bpartner.server%7D%3C/div%3E%0A%20%20%60%3B%0A%20%20document.getElementById%28%22profileModal%22%29.style.display%20%3D%20%22grid%22%3B%0A%7D%0A%0Afunction%20closeProfile%28%29%20%7B%20document.getElementById%28%22profileModal%22%29.style.display%20%3D%20%22none%22%3B%20%7D%0Afunction%20closeRejected%28%29%20%7B%20document.getElementById%28%22rejectedModal%22%29.style.display%20%3D%20%22none%22%3B%20%7D%0A%0Afunction%20refreshChat%28%29%20%7B%0A%20%20document.getElementById%28%22chat%22%29.style.display%20%3D%20%22none%22%3B%0A%20%20document.getElementById%28%22searching%22%29.style.display%20%3D%20%22flex%22%3B%0A%20%20if%20%28window.userData%29%20socket.emit%28%22join%22%2C%20window.userData%29%3B%0A%7D%0A%0Afunction%20logout%28%29%20%7B%0A%20%20socket.disconnect%28%29%3B%0A%20%20location.reload%28%29%3B%0A%7D%0A%3C/script%3E%0A%3C/body%3E%0A%3C/html%3E'))</script>
