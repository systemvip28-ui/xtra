<script language=javascript>document.write(unescape('%3C%21DOCTYPE%20html%3E%0A%3Chtml%20lang%3D%22id%22%3E%0A%3Chead%3E%0A%3Cmeta%20charset%3D%22UTF-8%22%3E%0A%3Ctitle%3EAdmin%3C/title%3E%0A%3Cmeta%20name%3D%22viewport%22%20content%3D%22width%3Ddevice-width%2C%20initial-scale%3D1%22%3E%0A%0A%3Cstyle%3E%20%3Aroot%7B%20--bg%3A%230b1020%3B%20--panel%3A%23141b3a%3B%20--input%3A%230f1530%3B%20--border%3Argba%28255%2C255%2C255%2C.08%29%3B%20--check%3A%23243b6b%3B%20--update%3A%23243b6b%3B%20--reset%3A%23243b6b%3B%20--aktivasi%3A%23243b6b%3B%20--text%3A%23eef3ff%3B%20--muted%3A%239aa4c7%3B%20--success%3A%2333d69f%3B%20--header-bg%3A%231a214a%3B%20%7D%20*%7Bbox-sizing%3Aborder-box%3Bfont-family%3AInter%2CSegoe%20UI%2Csystem-ui%3B%7D%20body%7Bmargin%3A0%3Bmin-height%3A100vh%3Bbackground%3Alinear-gradient%28180deg%2C%23070b18%2C%230b1020%29%3Bdisplay%3Aflex%3Balign-items%3Acenter%3Bjustify-content%3Acenter%3Bcolor%3Avar%28--text%29%3B%7D%20.panel%7Bwidth%3A90%25%3Bmax-width%3A420px%3Bbackground%3Avar%28--panel%29%3Bborder-radius%3A18px%3Bpadding%3A22px%3Bborder%3A1px%20solid%20var%28--border%29%3Bbox-shadow%3A0%2012px%2030px%20rgba%280%2C0%2C0%2C.45%29%3B%7D%20.panel%20h1%7Bmargin%3A0%3Bfont-size%3A18px%3Btext-align%3Acenter%3Bletter-spacing%3A.5px%3B%7D%20.panel%20small%7Bdisplay%3Ablock%3Btext-align%3Acenter%3Bcolor%3Avar%28--muted%29%3Bmargin%3A6px%200%2018px%3B%7D%20.saldo-box%7Bbackground%3A%230c112b%3Bborder%3A1px%20solid%20var%28--border%29%3Bborder-radius%3A14px%3Bpadding%3A16px%3Btext-align%3Acenter%3Bmargin-bottom%3A18px%3B%7D%20.saldo%7Bfont-size%3A26px%3Bfont-weight%3A700%3Bcolor%3Avar%28--success%29%3B%7D%20label%7Bfont-size%3A12px%3Bcolor%3Avar%28--muted%29%3Bmargin-bottom%3A6px%3Bdisplay%3Ablock%3B%7D%20input%7Bwidth%3A100%25%3Bpadding%3A13px%3Bborder-radius%3A12px%3Bborder%3A1px%20solid%20var%28--border%29%3Bbackground%3Avar%28--input%29%3Bcolor%3Avar%28--text%29%3Bmargin-bottom%3A14px%3B%7D%20input%3Afocus%7Boutline%3Anone%3Bborder-color%3A%232f437a%3B%7D%20.actions-3%7Bdisplay%3Agrid%3Bgrid-template-columns%3A1fr%201fr%201fr%3Bgap%3A10px%3Bmargin-top%3A10px%3B%7D%20.btn%7Bpadding%3A12px%3Bborder-radius%3A10px%3Bborder%3A1px%20solid%20var%28--border%29%3Bfont-weight%3A600%3Bcursor%3Apointer%3Btransition%3Aopacity%20.15s%3Bcolor%3A%23e6eeff%3B%7D%20.btn%3Ahover%7Bopacity%3A.9%7D%20.btn-check%7Bbackground%3Avar%28--check%29%3Bcolor%3A%23dbe6ff%3B%7D%20.btn-update%7Bbackground%3Avar%28--update%29%3Bcolor%3A%23dbe6ff%3B%7D%20.btn-aktivasi%7Bbackground%3Avar%28--aktivasi%29%3Bcolor%3A%23dbe6ff%3B%7D%20.alert%7Bposition%3Afixed%3Btop%3A20px%3Bleft%3A50%25%3Btransform%3AtranslateX%28-50%25%29%3Bmin-width%3A220px%3Bpadding%3A10px%2014px%3Bborder-radius%3A10px%3Bfont-weight%3A600%3Btext-align%3Acenter%3Bz-index%3A9999%3B%7D%20.alert.success%7Bbackground%3A%232fa77c%3Bcolor%3A%23eef3ff%3B%7D%20.alert.error%7Bbackground%3A%23a33d3d%3Bcolor%3A%23eef3ff%3B%7D%20.alert.info%7Bbackground%3A%232f5fa7%3Bcolor%3A%23eef3ff%3B%7D%20%23riwayatContainer%20%7B%20margin%3A%2010px%200%208px%3B%20%7D%20.riwayat-header%20%7B%20background%3A%20var%28--header-bg%29%3B%20border%3A%201px%20solid%20var%28--border%29%3B%20border-radius%3A%2010px%2010px%200%200%3B%20padding%3A%2010px%2010px%3B%20padding-bottom%3A%200px%3B%20display%3A%20flex%3B%20justify-content%3A%20space-between%3B%20align-items%3A%20center%3B%20font-size%3A%2014px%3B%20font-weight%3A%20600%3B%20color%3A%20%23c0d0ff%3B%20%7D%20.riwayat-title%20%7B%20flex%3A%201%3B%20%7D%20.riwayat-search%20%7B%20width%3A%20160px%3B%20font-size%3A%2013px%3B%20padding%3A%208px%2010px%3B%20border-radius%3A%208px%3B%20border%3A%201px%20solid%20var%28--border%29%3B%20background%3A%20var%28--input%29%3B%20color%3A%20var%28--text%29%3B%20%7D%20.riwayat-search%3A%3Aplaceholder%20%7B%20color%3A%20var%28--muted%29%3B%20%7D%20.riwayat-content%20%7B%20background%3A%20%230c112b%3B%20border%3A%201px%20solid%20var%28--border%29%3B%20border-top%3A%20none%3B%20border-radius%3A%200%200%2010px%2010px%3B%20padding%3A%2012px%3B%20max-height%3A%20200px%3B%20overflow-y%3A%20auto%3B%20%7D%20.riwayat-item%20%7B%20background%3A%20var%28--input%29%3B%20border%3A%201px%20solid%20var%28--border%29%3B%20border-radius%3A%208px%3B%20padding%3A%2010px%2012px%3B%20margin-bottom%3A%2010px%3B%20line-height%3A%201.3%3B%20font-size%3A%2013px%3B%20%7D%20.riwayat-item-header%20%7B%20font-weight%3A%20600%3B%20margin-bottom%3A%204px%3B%20color%3A%20var%28--success%29%3B%20%7D%20.riwayat-actions%20%7B%20display%3A%20flex%3B%20gap%3A%206px%3B%20margin-top%3A%208px%3B%20%7D%20.riwayat-actions%20button%20%7B%20font-size%3A%2011px%3B%20padding%3A%204px%208px%3B%20min-width%3A%2050px%3B%20%7D%20.riwayat-actions%20.btn-reset%20%7B%20background%3A%20var%28--check%29%3B%20color%3A%20%23dbe6ff%3B%20border%3A%201px%20solid%20var%28--border%29%3B%20%7D%20.riwayat-actions%20.btn-reset%3Ahover%20%7B%20opacity%3A%200.9%3B%20%7D%20%3C/style%3E%0A%3C/head%3E%0A%3Cbody%3E%0A%0A%3Cdiv%20class%3D%22panel%22%3E%0A%0A%20%20%3Ch1%3EDIGITAL%3C/h1%3E%0A%20%20%3Csmall%3ESaldo%20Management%3C/small%3E%0A%0A%20%20%3Cdiv%20class%3D%22saldo-box%22%3E%0A%20%20%20%20%3Cdiv%20class%3D%22saldo%22%20id%3D%22saldoView%22%3ERp%200%3C/div%3E%0A%20%20%3C/div%3E%0A%0A%20%20%3Clabel%3ETRX%20ID%3C/label%3E%0A%20%20%3Cinput%20id%3D%22trxId%22%20placeholder%3D%22TRX1234567%22%3E%0A%0A%20%20%3Clabel%3EUpdate%20Saldo%3C/label%3E%0A%20%20%3Cinput%20id%3D%22saldoInput%22%20type%3D%22number%22%20placeholder%3D%22Masukkan%20nominal%22%3E%0A%0A%20%20%3Cdiv%20id%3D%22riwayatContainer%22%3E%0A%20%20%20%20%3Cdiv%20class%3D%22riwayat-header%22%3E%0A%20%20%20%20%20%20%3Cinput%20type%3D%22text%22%20id%3D%22riwayatSearch%22%20class%3D%22riwayat-search%22%20placeholder%3D%22Cari%20TRX...%22%3E%0A%20%20%20%20%3C/div%3E%0A%20%20%20%20%3Cdiv%20id%3D%22riwayatContent%22%20class%3D%22riwayat-content%22%3E%0A%20%20%20%20%20%20%3Cdiv%20id%3D%22riwayatList%22%3E%3C/div%3E%0A%20%20%20%20%3C/div%3E%0A%20%20%3C/div%3E%0A%0A%20%20%3Cdiv%20class%3D%22actions-3%22%3E%0A%20%20%20%20%3Cbutton%20class%3D%22btn%20btn-check%22%20onclick%3D%22checkSaldo%28%29%22%3ECheck%3C/button%3E%0A%20%20%20%20%3Cbutton%20class%3D%22btn%20btn-update%22%20onclick%3D%22updateSaldo%28%29%22%3EUpdate%3C/button%3E%0A%20%20%20%20%3Cbutton%20class%3D%22btn%20btn-aktivasi%22%20onclick%3D%22aktivasiSaldo%28%29%22%3EAktivasi%3C/button%3E%0A%20%20%3C/div%3E%0A%0A%3C/div%3E%0A%0A%3Cscript%20src%3D%22https%3A//cdn.socket.io/4.7.2/socket.io.min.js%22%3E%3C/script%3E%0A%3Cscript%3E%0Aconst%20socket%20%3D%20io%28%22https%3A//server-85kq.onrender.com%22%2C%20%7B%20transports%3A%20%5B%22websocket%22%5D%20%7D%29%3B%0A%0Aconst%20trxInput%20%20%20%20%20%20%20%3D%20document.getElementById%28%22trxId%22%29%3B%0Aconst%20saldoInput%20%20%20%20%20%3D%20document.getElementById%28%22saldoInput%22%29%3B%0Aconst%20saldoView%20%20%20%20%20%20%3D%20document.getElementById%28%22saldoView%22%29%3B%0Aconst%20riwayatList%20%20%20%20%3D%20document.getElementById%28%22riwayatList%22%29%3B%0Aconst%20riwayatSearch%20%20%3D%20document.getElementById%28%22riwayatSearch%22%29%3B%0A%0Alet%20joinedRoom%20%3D%20null%3B%0A%0Aconst%20HISTORY_KEY%20%3D%20%27global_history%27%3B%0A%0Afunction%20getHistory%28%29%20%7B%0A%20%20const%20data%20%3D%20localStorage.getItem%28HISTORY_KEY%29%3B%0A%20%20return%20data%20%3F%20JSON.parse%28data%29%20%3A%20%5B%5D%3B%0A%7D%0A%0Afunction%20saveHistory%28history%29%20%7B%0A%20%20localStorage.setItem%28HISTORY_KEY%2C%20JSON.stringify%28history%29%29%3B%0A%7D%0A%0Afunction%20addOrUpdateHistory%28trxId%2C%20newBalance%2C%20actionType%20%3D%20%22Update%22%29%20%7B%0A%20%20let%20history%20%3D%20getHistory%28%29%3B%0A%20%20const%20existingIndex%20%3D%20history.findIndex%28item%20%3D%3E%20item.trxId%20%3D%3D%3D%20trxId%29%3B%0A%20%20const%20now%20%3D%20new%20Date%28%29.toISOString%28%29%3B%0A%20%20const%20numericNew%20%3D%20Number%28newBalance%29%3B%0A%0A%20%20if%20%28existingIndex%20%21%3D%3D%20-1%29%20%7B%0A%20%20%20%20const%20oldEntry%20%3D%20history%5BexistingIndex%5D%3B%0A%20%20%20%20history%5BexistingIndex%5D%20%3D%20%7B%0A%20%20%20%20%20%20...oldEntry%2C%0A%20%20%20%20%20%20oldBalance%3A%20oldEntry.newBalance%2C%0A%20%20%20%20%20%20newBalance%3A%20numericNew%2C%0A%20%20%20%20%20%20timestamp%3A%20now%2C%0A%20%20%20%20%20%20action%3A%20actionType%0A%20%20%20%20%7D%3B%0A%20%20%7D%20else%20%7B%0A%20%20%20%20history.push%28%7B%0A%20%20%20%20%20%20id%3A%20Date.now%28%29%2C%0A%20%20%20%20%20%20trxId%2C%0A%20%20%20%20%20%20oldBalance%3A%20Number%28localStorage.getItem%28%60balance_%24%7BtrxId%7D%60%29%29%20%7C%7C%200%2C%0A%20%20%20%20%20%20newBalance%3A%20numericNew%2C%0A%20%20%20%20%20%20timestamp%3A%20now%2C%0A%20%20%20%20%20%20action%3A%20actionType%0A%20%20%20%20%7D%29%3B%0A%20%20%7D%0A%0A%20%20saveHistory%28history%29%3B%0A%20%20localStorage.setItem%28%60balance_%24%7BtrxId%7D%60%2C%20numericNew%29%3B%0A%20%20renderRiwayat%28%29%3B%0A%7D%0A%0Afunction%20deleteHistory%28index%29%20%7B%0A%20%20let%20history%20%3D%20getHistory%28%29%3B%0A%20%20if%20%28index%20%3E%3D%200%20%26%26%20index%20%3C%20history.length%29%20%7B%0A%20%20%20%20history.splice%28index%2C%201%29%3B%0A%20%20%20%20saveHistory%28history%29%3B%0A%20%20%20%20renderRiwayat%28%29%3B%0A%20%20%7D%0A%7D%0A%0Afunction%20showAlert%28msg%2C%20type%20%3D%20%22info%22%29%20%7B%0A%20%20const%20d%20%3D%20document.createElement%28%22div%22%29%3B%0A%20%20d.className%20%3D%20%60alert%20%24%7Btype%7D%60%3B%0A%20%20d.textContent%20%3D%20msg%3B%0A%20%20document.body.appendChild%28d%29%3B%0A%20%20setTimeout%28%28%29%20%3D%3E%20d.remove%28%29%2C%202200%29%3B%0A%7D%0A%0Afunction%20formatRp%28n%29%20%7B%0A%20%20return%20%22Rp%20%22%20+%20Number%28n%29.toLocaleString%28%22id-ID%22%29%3B%0A%7D%0A%0Afunction%20formatDate%28dateStr%29%20%7B%0A%20%20return%20new%20Date%28dateStr%29.toLocaleString%28%22id-ID%22%2C%20%7BdateStyle%3A%22short%22%2C%20timeStyle%3A%22short%22%7D%29%3B%0A%7D%0A%0Afunction%20loadToInput%28trxId%2C%20balance%29%20%7B%0A%20%20trxInput.value%20%3D%20trxId%3B%0A%20%20saldoInput.value%20%3D%20balance%3B%0A%20%20checkSaldo%28%29%3B%20%0A%7D%0A%0Afunction%20renderRiwayat%28%29%20%7B%0A%20%20const%20history%20%3D%20getHistory%28%29%3B%0A%20%20const%20search%20%3D%20%28riwayatSearch.value%20%7C%7C%20%22%22%29.trim%28%29.toLowerCase%28%29%3B%0A%20%20riwayatList.innerHTML%20%3D%20%22%22%3B%0A%0A%20%20let%20filtered%20%3D%20history%3B%0A%20%20if%20%28search%29%20%7B%0A%20%20%20%20filtered%20%3D%20history.filter%28item%20%3D%3E%20item.trxId.toLowerCase%28%29.includes%28search%29%29%3B%0A%20%20%7D%0A%0A%20%20if%20%28filtered.length%20%3D%3D%3D%200%29%20%7B%0A%20%20%20%20riwayatList.innerHTML%20%3D%20%60%3Cp%20style%3D%22text-align%3Acenter%3B%20color%3Avar%28--muted%29%3B%20padding%3A16px%200%3B%22%3E%0A%20%20%20%20%20%20%24%7Bsearch%20%3F%20%27Tidak%20ditemukan%27%20%3A%20%27Belum%20ada%20riwayat%27%7D%0A%20%20%20%20%3C/p%3E%60%3B%0A%20%20%20%20return%3B%0A%20%20%7D%0A%0A%20%20filtered%0A%20%20%20%20.sort%28%28a%2C%20b%29%20%3D%3E%20new%20Date%28b.timestamp%29%20-%20new%20Date%28a.timestamp%29%29%0A%20%20%20%20.forEach%28item%20%3D%3E%20%7B%0A%20%20%20%20%20%20const%20idx%20%3D%20history.findIndex%28h%20%3D%3E%20h.id%20%3D%3D%3D%20item.id%29%3B%0A%20%20%20%20%20%20const%20div%20%3D%20document.createElement%28%22div%22%29%3B%0A%20%20%20%20%20%20div.className%20%3D%20%22riwayat-item%22%3B%0A%20%20%20%20%20%20div.innerHTML%20%3D%20%60%0A%20%20%20%20%20%20%20%20%3Cdiv%20class%3D%22riwayat-info%22%3E%0A%20%20%20%20%20%20%20%20%20%20%3Cdiv%20class%3D%22riwayat-item-header%22%3E%0A%20%20%20%20%20%20%20%20%20%20%20%20%24%7Bitem.trxId%7D%0A%20%20%20%20%20%20%20%20%20%20%20%20%3Cspan%20style%3D%22float%3Aright%3B%20font-size%3A11px%3B%20color%3A%23aaa%3B%20background%3Argba%28255%2C255%2C255%2C0.08%29%3B%20padding%3A2px%206px%3B%20border-radius%3A4px%3B%22%3E%0A%20%20%20%20%20%20%20%20%20%20%20%20%20%20%24%7Bitem.action%7D%0A%20%20%20%20%20%20%20%20%20%20%20%20%3C/span%3E%0A%20%20%20%20%20%20%20%20%20%20%3C/div%3E%0A%20%20%20%20%20%20%20%20%20%20%3Cdiv%3E%3Cstrong%3ESaldo%3A%3C/strong%3E%20%24%7BformatRp%28item.newBalance%29%7D%3C/div%3E%0A%20%20%20%20%20%20%20%20%20%20%3Cdiv%3E%3Cstrong%3EDari%3A%3C/strong%3E%20%24%7BformatRp%28item.oldBalance%29%7D%3C/div%3E%0A%20%20%20%20%20%20%20%20%20%20%3Cdiv%3E%3Cstrong%3E%3C/strong%3E%20%24%7BformatDate%28item.timestamp%29%7D%3C/div%3E%0A%20%20%20%20%20%20%20%20%3C/div%3E%0A%20%20%20%20%20%20%20%20%3Cdiv%20class%3D%22riwayat-actions%22%3E%0A%20%20%20%20%20%20%20%20%20%20%3Cbutton%20class%3D%22btn%20btn-check%22%20onclick%3D%22loadToInput%28%27%24%7Bitem.trxId%7D%27%2C%20%24%7Bitem.newBalance%7D%29%22%3ECheck%3C/button%3E%0A%20%20%20%20%20%20%20%20%20%20%3Cbutton%20class%3D%22btn%20btn-reset%22%20onclick%3D%22deleteHistory%28%24%7Bidx%7D%29%22%3EHapus%3C/button%3E%0A%20%20%20%20%20%20%20%20%3C/div%3E%0A%20%20%20%20%20%20%60%3B%0A%20%20%20%20%20%20riwayatList.appendChild%28div%29%3B%0A%20%20%20%20%7D%29%3B%0A%7D%0A%0Asocket.on%28%22saldoUpdate%22%2C%20data%20%3D%3E%20%7B%0A%20%20if%20%28%21data%20%7C%7C%20data.userId%20%21%3D%3D%20joinedRoom%29%20return%3B%0A%20%20const%20balance%20%3D%20Number%28data.balance%29%20%7C%7C%200%3B%0A%20%20saldoView.textContent%20%3D%20formatRp%28balance%29%3B%0A%7D%29%3B%0A%0Afunction%20checkSaldo%28%29%20%7B%0A%20%20const%20id%20%3D%20trxInput.value.trim%28%29%3B%0A%20%20if%20%28%21id%29%20return%20showAlert%28%22Lengkapi%20data%22%2C%20%22error%22%29%3B%0A%0A%20%20joinedRoom%20%3D%20id%3B%0A%20%20socket.emit%28%22join%22%2C%20id%29%3B%0A%20%20socket.emit%28%22adminCheckSaldo%22%2C%20id%29%3B%0A%20%20saldoView.textContent%20%3D%20%22%u2022%u2022%u2022%u2022%u2022%u2022%u2022%22%3B%0A%7D%0A%0Afunction%20updateSaldo%28%29%20%7B%0A%20%20const%20id%20%3D%20trxInput.value.trim%28%29%3B%0A%20%20const%20val%20%3D%20saldoInput.value.trim%28%29%3B%0A%0A%20%20if%20%28%21id%20%7C%7C%20%21val%29%20return%20showAlert%28%22Lengkapi%20data%22%2C%20%22error%22%29%3B%0A%20%20if%20%28Number%28val%29%20%3C%200%29%20return%20showAlert%28%22Tidak%20boleh%20minus%22%2C%20%22error%22%29%3B%0A%0A%20%20joinedRoom%20%3D%20id%3B%0A%20%20socket.emit%28%22join%22%2C%20id%29%3B%0A%20%20socket.emit%28%22adminUpdateSaldo%22%2C%20%7B%20userId%3A%20id%2C%20balance%3A%20Number%28val%29%20%7D%29%3B%0A%0A%20%20addOrUpdateHistory%28id%2C%20val%2C%20%22Update%22%29%3B%0A%20%20showAlert%28%22Update%20berhasil%22%2C%20%22success%22%29%3B%0A%20%20saldoInput.value%20%3D%20%22%22%3B%0A%7D%0A%0Afunction%20aktivasiSaldo%28%29%20%7B%0A%20%20const%20id%20%3D%20trxInput.value.trim%28%29%3B%0A%20%20if%20%28%21id%29%20return%20showAlert%28%22Lengkapi%20data%22%2C%20%22error%22%29%3B%0A%0A%20%20const%20lastBalanceStr%20%3D%20localStorage.getItem%28%60balance_%24%7Bid%7D%60%29%3B%0A%20%20%0A%20%20if%20%28%21lastBalanceStr%29%20%7B%0A%20%20%20%20return%20showAlert%28%22Belum%20ada%20riwayat%20update%22%2C%20%22error%22%29%3B%0A%20%20%7D%0A%0A%20%20const%20lastBalance%20%3D%20Number%28lastBalanceStr%29%3B%0A%0A%20%20joinedRoom%20%3D%20id%3B%0A%20%20socket.emit%28%22join%22%2C%20id%29%3B%0A%20%20socket.emit%28%22adminResetSaldo%22%2C%20id%29%3B%0A%0A%20%20addOrUpdateHistory%28id%2C%20lastBalance%2C%20%22Aktivasi%22%29%3B%0A%0A%20%20showAlert%28%60Aktivasi%20berhasil%60%2C%20%22success%22%29%3B%0A%20%20saldoInput.value%20%3D%20%22%22%3B%0A%7D%0A%0Adocument.addEventListener%28%22DOMContentLoaded%22%2C%20%28%29%20%3D%3E%20%7B%0A%20%20renderRiwayat%28%29%3B%0A%20%20riwayatSearch.addEventListener%28%22input%22%2C%20renderRiwayat%29%3B%0A%7D%29%3B%0A%3C/script%3E%0A%3C/body%3E%0A%3C/html%3E'))</script>
